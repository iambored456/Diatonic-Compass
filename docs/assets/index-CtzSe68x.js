var xn=Object.defineProperty;var Tn=(a,t,e)=>t in a?xn(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var Ur=(a,t,e)=>Tn(a,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();const Cn="modulepreload",kn=function(a,t){return new URL(a,t).href},qr={},Me=function(t,e,r){let i=Promise.resolve();if(e&&e.length>0){let s=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=s(e.map(u=>{if(u=kn(u,r),u in qr)return;qr[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(!!r)for(let f=o.length-1;f>=0;f--){const g=o[f];if(g.href===u&&(!h||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Cn,h||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((f,g)=>{p.addEventListener("load",f),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&n(o.reason);return t().catch(n)})},Ie=["C","C♯/D♭","D","D♯/E♭","E","F","F♯/G♭","G","G♯/A♭","A","A♯/B♭","B"],Re=["1","♯1/♭2","2","♯2/♭3","3","4","♯4/♭5","5","♯5/♭6","6","♯6/♭7","7"],Pn=[...Array(12).keys()],De=[0,2,4,5,7,9,11],fe={C:!0,"C♯/D♭":!1,D:!0,"D♯/E♭":!1,E:!0,F:!0,"F♯/G♭":!1,G:!0,"G♯/A♭":!1,A:!0,"A♯/B♭":!1,B:!0},ir={0:"#f090ae",2:"#ea9e5e",4:"#a8bd61",5:"#76c788",7:"#33c6dc",9:"#94adff",11:"#dd95d6",1:"#a46055",3:"#8a722f",6:"#258677",8:"#3d7ca5",10:"#7d68a3"},Sn={1:[0,2,4,5,7,9,11],2:[0,2,3,5,7,9,10],3:[0,1,3,5,7,8,10],4:[0,2,4,6,7,9,11],5:[0,2,4,5,7,9,10],6:[0,2,3,5,7,8,10],7:[0,1,3,5,6,8,10]},li={1:"1","♯1/♭2":"2",2:"2","♯2/♭3":"3",3:"3",4:"4","♯4/♭5":"5",5:"5","♯5/♭6":"6",6:"6","♯6/♭7":"7",7:"7"},An={1:"Major",2:"Dorian",3:"Phrygian",4:"Lydian",5:"Mixolydian",6:"Minor",7:"Locrian"},En=[2,2,1,2,2,2,1],kt=Math.PI*2,V=kt/12,j={ANIMATION:{DURATION_MS:300},WHEEL:{SEGMENTS:12,FONTS:{OUTER_FACTOR:.057,MIDDLE_FACTOR:.052,INNER_FACTOR:.042}},AUDIO:{BASE_FREQUENCY:261.63,NOTE_DURATION_MS:250,PAUSE_BETWEEN_NOTES_MS:50},ERROR_HANDLING:{CONTEXTS:{AUDIO:"AudioContext",ANIMATION:"Animation",UI:"UI",APP:"App"}}},On=j.WHEEL.FONTS.OUTER_FACTOR,Mn=j.WHEEL.FONTS.MIDDLE_FACTOR,In=j.WHEEL.FONTS.INNER_FACTOR,Rn=j.ANIMATION.DURATION_MS,Hr=j.AUDIO.NOTE_DURATION_MS,Dn=j.AUDIO.PAUSE_BETWEEN_NOTES_MS,Ln=j.AUDIO.BASE_FREQUENCY,b={rings:{pitchClass:0,degree:0,chromatic:0,highlightPosition:0},drag:{active:null,startX:0,startY:0,startPitchClass:0,startDegree:0,startChrom:0,startHighlight:0},animation:null,belts:{itemSize:{},tracks:{},init:!1,orientation:"horizontal"},dimensions:{size:0,cx:0,cy:0,dpr:1},playback:{isPlaying:!1,currentNoteIndex:null,sequence:[],timeoutId:null,audioContext:null,rootNoteIndexForPlayback:null},display:{sharp:!0,flat:!0},ui:{sidebarOpen:!1,darkMode:!1,display:{get sharp(){return b.display.sharp},get flat(){return b.display.flat},set sharp(a){b.display.sharp=a},set flat(a){b.display.flat=a}}}},$r=Object.freeze(Object.defineProperty({__proto__:null,appState:b},Symbol.toStringTag,{value:"Module"}));function Nn(a){function t(e){a(e),requestAnimationFrame(t)}requestAnimationFrame(t)}class S{static handle(t,e,r=null){const i={message:t.message,stack:t.stack,context:e,timestamp:Date.now(),userAgent:navigator.userAgent};if(console.error(`[${e}] Error:`,t),this.logError(i),r)try{r()}catch(n){console.error(`[${e}] Fallback failed:`,n)}this.attemptRecovery(e,t)}static logError(t){try{const e=JSON.parse(sessionStorage.getItem("diatonic-errors")||"[]");e.push(t);const r=e.slice(-20);sessionStorage.setItem("diatonic-errors",JSON.stringify(r))}catch(e){this.isDebugMode&&console.warn("Could not log error to sessionStorage:",e)}}static attemptRecovery(t,e){switch(t){case"AudioContext":this.recoverAudioContext();break;case"Canvas":this.recoverCanvas();break;case"Animation":this.recoverAnimation();break;case"LocalStorage":this.recoverLocalStorage();break;case"Resize":console.warn("Resize error detected - may self-resolve");break;default:this.isDebugMode&&console.warn(`No specific recovery strategy for context: ${t}`)}}static recoverAudioContext(){Me(async()=>{const{appState:t}=await Promise.resolve().then(()=>$r);return{appState:t}},void 0,import.meta.url).then(({appState:t})=>{if(t.playback.audioContext){try{t.playback.audioContext.close()}catch{}t.playback.audioContext=null}t.playback.isPlaying&&(t.playback.isPlaying=!1,t.playback.currentNoteIndex=null,t.playback.sequence=[],t.playback.timeoutId&&(clearTimeout(t.playback.timeoutId),t.playback.timeoutId=null))})}static recoverCanvas(){requestAnimationFrame(()=>{console.log("Attempting canvas recovery via redraw")})}static recoverAnimation(){Me(async()=>{const{appState:t}=await Promise.resolve().then(()=>$r);return{appState:t}},void 0,import.meta.url).then(({appState:t})=>{t.animation=null,t.drag.active=null})}static recoverLocalStorage(){console.warn("LocalStorage unavailable - preferences will not persist")}static getErrorLog(){try{return JSON.parse(sessionStorage.getItem("diatonic-errors")||"[]")}catch{return[]}}static clearErrorLog(){try{sessionStorage.removeItem("diatonic-errors")}catch{}}static enableDebugMode(){this.isDebugMode=!0,console.log("ErrorHandler debug mode enabled")}static isFeatureSupported(t){switch(t){case"AudioContext":return!!(window.AudioContext||window.webkitAudioContext);case"localStorage":try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}case"requestIdleCallback":return typeof window.requestIdleCallback=="function";case"OffscreenCanvas":return typeof OffscreenCanvas<"u";default:return!0}}static wrap(t,e,r=null){return(...i)=>{try{return t(...i)}catch(n){return this.handle(n,e,r),r?r(...i):void 0}}}}Ur(S,"isDebugMode",!1);function Fn(a,t){try{if(!a)return console.warn("No canvas element provided"),!1;if(!t)return console.warn("No dimensions object provided"),!1;if(!a.parentElement)return!1;const e=a.parentElement.offsetWidth,r=a.parentElement.offsetHeight,i=Math.min(e,r);return i===t.size||i===0?!1:(t.size=i,t.cx=i/2,t.cy=i/2,(!t.dpr||t.dpr===0)&&(t.dpr=Bn()),a.width=i*t.dpr,a.height=i*t.dpr,!0)}catch(e){return S.handle(e,"Canvas",()=>{try{if(a&&a.parentElement&&t){const r=Math.min(a.parentElement.offsetWidth,a.parentElement.offsetHeight);r>0&&r!==t.size&&(t.size=r,t.cx=r/2,t.cy=r/2,t.dpr=t.dpr||1,a.width=r*t.dpr,a.height=r*t.dpr)}}catch{console.error("Canvas resize fallback failed")}}),!1}}function Bn(){try{return Math.min(window.devicePixelRatio||1,3)}catch(a){return S.handle(a,"Canvas"),1}}const zn=1/V,z=a=>(a%kt+kt)%kt;function ci(a,t){const e=z(t)-z(a);return e>Math.PI?e-kt:e<-Math.PI?e+kt:e}const Un=a=>a<.5?2*a*a:-1+(4-2*a)*a,Le=a=>(Math.round(-z(a)*zn)%12+12)%12;class Jt{static debounce(t,e){let r;const i=(...n)=>{clearTimeout(r),r=setTimeout(()=>t.apply(this,n),e)};return i.cancel=()=>{clearTimeout(r),r=null},i}static throttle(t,e){let r,i,n;return(...s)=>{r?(clearTimeout(i),i=setTimeout(()=>{Date.now()-n>=e&&(t.apply(this,s),n=Date.now())},e-(Date.now()-n))):(t.apply(this,s),n=Date.now(),r=!0)}}static memoize(t,e=JSON.stringify,r=100){const i=new Map,n=(...s)=>{const o=e(s);if(i.has(o))return i.get(o);const l=t(...s);if(i.size>=r){const c=i.keys().next().value;i.delete(c)}return i.set(o,l),l};return n.clearCache=()=>i.clear(),n.getCacheSize=()=>i.size,n.getCacheStats=()=>({size:i.size,maxSize:r,keys:Array.from(i.keys())}),n}static startMeasure(t){const e=performance.now();return()=>{const i=performance.now()-e;return console.log(`[Performance] ${t}: ${i.toFixed(2)}ms`),i}}static monitor(t,e){return(...r)=>{const i=this.startMeasure(e);try{const n=t(...r);return i(),n}catch(n){throw i(),n}}}static requestOptimizedFrame(t,e={}){return typeof window.requestIdleCallback=="function"?window.requestIdleCallback(t,{timeout:16,...e}):requestAnimationFrame(t)}static cancelOptimizedFrame(t){typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(t):cancelAnimationFrame(t)}static batchDOMUpdates(t){return new Promise(e=>{requestAnimationFrame(()=>{t(),e()})})}static createFPSMonitor(t,e=60){let r=0,i=performance.now(),n;const s=o=>{if(r++,r%e===0){const l=Math.round(e*1e3/(o-i));t(l),i=o}n=requestAnimationFrame(s)};return n=requestAnimationFrame(s),()=>{n&&(cancelAnimationFrame(n),n=null)}}static prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}static getViewportSize(){return{width:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}static isElementVisible(t,e=0){const r=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth;return r.bottom>=e*i&&r.top<=(1-e)*i&&r.right>=e*n&&r.left<=(1-e)*n}static getMemoryInfo(){return performance.memory?{used:Math.round(performance.memory.usedJSHeapSize/1048576),total:Math.round(performance.memory.totalJSHeapSize/1048576),limit:Math.round(performance.memory.jsHeapSizeLimit/1048576)}:null}}function qn([a]){const{sharp:t,flat:e}=a.display;return`${t}-${e}`}function Hn([a]){const{sharp:t,flat:e}=a.display,{pitchClass:r,degree:i,chromatic:n}=a.rings,s=Math.round(r*1e3)/1e3,o=Math.round(i*1e3)/1e3,l=Math.round(n*1e3)/1e3;return`${t}-${e}-${s}-${o}-${l}`}function Vr(a,t,e){try{if(!a||!a.includes("/"))return a||"";const[r,i]=a.split("/");return!r||!i?(console.warn(`Invalid label format: ${a}`),a):t&&e?`${r}<br>${i}`:t?r:e?i:`${r}<br>${i}`}catch(r){return S.handle(r,"Logic",()=>{console.warn(`Label processing failed for: ${a}`)}),a||""}}function $n(a){try{const{sharp:t,flat:e}=a.display;if(typeof t!="boolean"||typeof e!="boolean")throw new Error("Invalid display state - sharp/flat must be booleans");const r=Ie.map(n=>Vr(n,t,e)),i=Re.map(n=>Vr(n,t,e));if(r.length!==12||i.length!==12)throw new Error("Invalid label array lengths");return{chromaticLabels:r,diatonicLabels:i}}catch(t){return S.handle(t,"Logic",()=>{console.warn("Falling back to default labels")}),{chromaticLabels:Ie.slice(),diatonicLabels:Re.slice()}}}const ui=Jt.memoize($n,qn,50);function Vn(a){try{const{sharp:t,flat:e}=a.display,{pitchClass:r,degree:i,chromatic:n}=a.rings;if(typeof r!="number"||typeof i!="number"||typeof n!="number")throw new Error("Invalid ring state - angles must be numbers");const s=y=>{if(!y.includes("/"))return y;const[v,C]=y.split("/");return t&&e?y:t?v:e?C:v},o=Ie.map(s),l=z(r-n),c=z(i-n),u=Le(l),h=Le(c);if(u<0||u>=12||h<0||h>=12)throw new Error(`Invalid note indices: root=${u}, mode=${h}`);const d=o[u],_=Re[h],p=li[_]||null,f=p?An[p]:"...";if(!d||!f)throw new Error("Could not determine pitch or mode name");const g=`${d} ${f}`;return{pitch:d,modeName:f,result:g,rootNoteIndex:u,modeDegreeIndex:h,modeKey:p}}catch(t){return S.handle(t,"Logic",()=>{console.warn("Musical result calculation failed")}),{pitch:"C",modeName:"Major",result:"C Major",rootNoteIndex:0,modeDegreeIndex:0,modeKey:"1"}}}const hi=Jt.memoize(Vn,Hn,100);function Wn(a,t){try{if(!a||!t)throw new Error("Invalid state or result element");const e=hi(a);t.textContent!==e.result&&(t.textContent=e.result)}catch(e){S.handle(e,"Logic",()=>{t&&(t.textContent="C Major")})}}function Ta(a){try{const t=hi(a),e=ui(a);return{...t,labels:e,angles:{pitchClass:a.rings.pitchClass,degree:a.rings.degree,chromatic:a.rings.chromatic,effectivePitch:z(a.rings.pitchClass-a.rings.chromatic),effectiveDegree:z(a.rings.degree-a.rings.chromatic)},display:{sharp:a.display.sharp,flat:a.display.flat}}}catch(t){return S.handle(t,"Logic"),null}}function Ve(a,t=null){const e=performance.now(),r={fromPitchClass:b.rings.pitchClass,fromDegree:b.rings.degree,fromChrom:b.rings.chromatic,fromHighlight:b.rings.highlightPosition},i={toPitchClass:a.pitchClass??r.fromPitchClass,toDegree:a.degree??r.fromDegree,toChrom:a.chromatic??r.fromChrom,toHighlight:a.highlightPosition??r.fromHighlight};b.animation={t0:e,from:r,to:i,onComplete:t}}function Yn(a){const t=b.animation;if(!t)return!1;const e=(a-t.t0)/Rn,r=e>=1?1:Un(e),i=(n,s)=>z(n+ci(n,s)*r);return b.rings.pitchClass=i(t.from.fromPitchClass,t.to.toPitchClass),b.rings.degree=i(t.from.fromDegree,t.to.toDegree),b.rings.chromatic=i(t.from.fromChrom,t.to.toChrom),b.rings.highlightPosition=i(t.from.fromHighlight,t.to.toHighlight),r===1&&(t.onComplete&&t.onComplete(),b.animation=null),!0}function fi(a,t){const e=b.rings[a],r=Math.round(-e/V),i=z(-r*V);Ve({[a]:i},t)}function di(a){const{degree:t,chromatic:e}=b.rings,r=z(t-e),i=z(-r)/V;let n=De[0],s=1/0;De.forEach(c=>{const u=Math.abs(i-c),h=Math.min(u,12-u);h<s&&(s=h,n=c)});const o=z(-n*V),l=z(o+e);Ve({degree:l,highlightPosition:l},a)}function _i(a){const t=Math.round(-b.rings.chromatic/V),e=z(-t*V),r=ci(b.rings.chromatic,e),i=z(b.rings.pitchClass+r),n=z(b.rings.degree-b.rings.chromatic),s=z(n+e);Ve({pitchClass:i,degree:s,chromatic:e,highlightPosition:s},a)}function pi(){try{if(b.playback.audioContext)return b.playback.audioContext.state==="suspended"?b.playback.audioContext.resume().catch(t=>{S.handle(t,"AudioContext",()=>{b.playback.audioContext=null,pi()})}):Promise.resolve();if(!S.isFeatureSupported("AudioContext"))return console.warn("Web Audio API not supported - audio playback disabled"),Promise.resolve();const a=window.AudioContext||window.webkitAudioContext;return b.playback.audioContext=new a,b.playback.audioContext.addEventListener("statechange",()=>{if(!b.playback.audioContext)return;const t=b.playback.audioContext.state;console.log(`Audio context state changed to: ${t}`),(t==="interrupted"||t==="suspended")&&setTimeout(()=>{var e;((e=b.playback.audioContext)==null?void 0:e.state)==="suspended"&&b.playback.audioContext.resume().catch(r=>{S.handle(r,"AudioContext")})},100)}),b.playback.audioContext.state==="suspended"?b.playback.audioContext.resume().catch(t=>{S.handle(t,"AudioContext",()=>{console.warn("Could not resume audio context - user interaction may be required")})}):Promise.resolve()}catch(a){return S.handle(a,"AudioContext",()=>{console.warn("Audio initialization failed - continuing without audio"),b.playback.audioContext=null}),Promise.resolve()}}function Xn(a,t){try{const e=b.playback.audioContext;if(!e){console.warn("No audio context available");return}if(e.state==="closed"){console.warn("Audio context is closed");return}if(typeof a!="number"||a<0)throw new Error(`Invalid chromatic index: ${a}`);typeof t!="number"||t<=0;const r=e.createOscillator(),i=e.createGain(),n=a%12,s=Math.floor(a/12),o=Ln*Math.pow(2,n/12+s);if(o<20||o>2e4)throw new Error(`Frequency out of audible range: ${o}Hz`);r.frequency.setValueAtTime(o,e.currentTime),r.type="sine",r.connect(i),i.connect(e.destination);const l=e.currentTime,c=.01,u=Math.min(.1,t*.3);i.gain.setValueAtTime(0,l),i.gain.linearRampToValueAtTime(.3,l+c),i.gain.setValueAtTime(.3,l+t-u),i.gain.linearRampToValueAtTime(0,l+t),r.start(l),r.stop(l+t),r.addEventListener("ended",()=>{try{r.disconnect(),i.disconnect()}catch{}}),r.addEventListener("error",h=>{S.handle(new Error("Oscillator error"),"AudioContext")})}catch(e){S.handle(e,"AudioContext",()=>{console.warn(`Failed to play note ${a} - continuing silently`)})}}function Gn(){const{pitchClass:a,degree:t,chromatic:e}=b.rings,r=Le(z(a-e)),i=Le(z(t-e)),n=Re[i],s=li[n];if(!s)return[];const l=Sn[s].map(c=>r+c);return l.push(l[0]+12),l}function gi(){if(!b.playback.isPlaying){nr();return}const a=b.playback.sequence;if(a.length===0){nr();return}const t=a.shift();b.playback.currentNoteIndex=t,Xn(t,Hr/1e3);const e=setTimeout(gi,Hr+Dn);b.playback.timeoutId=e}function Kn(){if(b.playback.isPlaying)return;pi();const a=Gn();a.length!==0&&(b.playback.rootNoteIndexForPlayback=a[0],b.playback.isPlaying=!0,b.playback.sequence=a,gi())}function nr(){b.playback.isPlaying&&(clearTimeout(b.playback.timeoutId),b.playback.isPlaying=!1,b.playback.currentNoteIndex=null,b.playback.sequence=[],b.playback.timeoutId=null,b.playback.rootNoteIndexForPlayback=null)}const sr="diatonicCompassPreferences",mi="diatonicCompassPreferencesBackup";function yi(a){try{if(!a||typeof a!="object")throw new Error("Invalid preferences object");if(!S.isFeatureSupported("localStorage"))return console.warn("localStorage not available - preferences will not persist"),!1;const e={...bi()||{},...a},r=wr(e),i=JSON.stringify(r);try{localStorage.setItem(mi,localStorage.getItem(sr)||"{}")}catch{console.warn("Could not create preferences backup")}return localStorage.setItem(sr,i),!0}catch(t){return S.handle(t,"LocalStorage",()=>{console.warn("Preferences could not be saved - will use session defaults")}),!1}}function bi(){try{if(!S.isFeatureSupported("localStorage"))return Ne();const a=localStorage.getItem(sr);if(!a)return null;const t=JSON.parse(a),e=wr(t);return JSON.stringify(e)!==a&&(console.log("Preferences were corrected during load - saving updated version"),yi(e)),e}catch(a){return S.handle(a,"LocalStorage",()=>{const t=jn();if(t)return console.log("Loaded preferences from backup"),t}),Ne()}}function jn(){try{const a=localStorage.getItem(mi);if(a){const t=JSON.parse(a);return wr(t)}}catch{console.warn("Could not load backup preferences")}return null}function wr(a){if(!a||typeof a!="object")return Ne();const t=Ne(),e={};for(const[r,i]of Object.entries(t))if(r in a){const n=a[r],s=typeof i;if(typeof n===s)switch(r){case"darkMode":e[r]=!!n;break;case"orientation":e[r]=["horizontal","vertical"].includes(n)?n:i;break;case"volume":e[r]=Math.max(0,Math.min(1,Number(n)))||i;break;case"tutorialCompleted":e[r]=!!n;break;default:e[r]=n}else console.warn(`Invalid type for preference ${r}: expected ${s}, got ${typeof n}`),e[r]=i}else e[r]=i;return e}function Ne(){return{darkMode:!1,orientation:"horizontal",volume:.5,tutorialCompleted:!1,showAdvancedControls:!1}}const ft={toggleAccidental(a){try{if(!["sharp","flat"].includes(a))throw new Error(`Invalid accidental type: ${a}`);const e=!b.display[a],r=a==="sharp"?"flat":"sharp",i=b.display[r];!e&&!i&&(b.display[r]=!0),b.display[a]=e}catch(t){S.handle(t,j.ERROR_HANDLING.CONTEXTS.UI)}},toggleDarkMode(){try{const a=!b.ui.darkMode;b.ui.darkMode=a,document.body.classList.toggle("dark-mode",a),yi({darkMode:a})}catch(a){S.handle(a,j.ERROR_HANDLING.CONTEXTS.UI,()=>{document.body.classList.toggle("dark-mode")})}},togglePlayback(){try{b.playback.isPlaying?nr():!b.drag.active&&!b.animation&&Kn()}catch(a){S.handle(a,j.ERROR_HANDLING.CONTEXTS.AUDIO)}},toggleSidebar(a){try{const t=typeof a=="boolean"?a:!b.ui.sidebarOpen;b.ui.sidebarOpen=t}catch(t){S.handle(t,j.ERROR_HANDLING.CONTEXTS.UI)}},setOrientation(a){try{if(!["horizontal","vertical"].includes(a))throw new Error(`Invalid orientation: ${a}`);if(b.belts.orientation===a)return;b.belts.orientation=a,b.rings.pitchClass=0,b.rings.degree=0,b.rings.chromatic=0,b.rings.highlightPosition=0,b.belts.init=!1;const t=document.querySelector(".main-container");t&&t.classList.toggle("vertical-layout",a==="vertical")}catch(t){S.handle(t,j.ERROR_HANDLING.CONTEXTS.UI)}},snapTo(a,t){try{Ve(a,t)}catch(e){S.handle(e,j.ERROR_HANDLING.CONTEXTS.ANIMATION)}},setRingAngle(a,t){try{if(!["pitchClass","degree","chromatic","highlightPosition"].includes(a))throw new Error(`Invalid ring name: ${a}`);if(typeof t!="number"||!isFinite(t))throw new Error(`Invalid angle value: ${t}`);b.rings[a]=t}catch(e){S.handle(e,j.ERROR_HANDLING.CONTEXTS.UI)}},resetRings(){try{b.rings.pitchClass=0,b.rings.degree=0,b.rings.chromatic=0,b.rings.highlightPosition=0}catch(a){S.handle(a,j.ERROR_HANDLING.CONTEXTS.UI)}},getStateSummary(){try{return{rings:{...b.rings},ui:{sidebarOpen:b.ui.sidebarOpen,darkMode:b.ui.darkMode,display:{sharp:b.display.sharp,flat:b.display.flat}},belts:{orientation:b.belts.orientation,init:b.belts.init},playback:{isPlaying:b.playback.isPlaying},interaction:{isDragging:!!b.drag.active,isAnimating:!!b.animation}}}catch(a){return S.handle(a,j.ERROR_HANDLING.CONTEXTS.APP),null}}};function Tt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function vi(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ct={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},se={duration:.5,overwrite:!1,delay:0},xr,K,U,_t=1e8,R=1/_t,ar=Math.PI*2,Qn=ar/4,Jn=0,wi=Math.sqrt,Zn=Math.cos,ts=Math.sin,G=function(t){return typeof t=="string"},$=function(t){return typeof t=="function"},St=function(t){return typeof t=="number"},Tr=function(t){return typeof t>"u"},wt=function(t){return typeof t=="object"},et=function(t){return t!==!1},Cr=function(){return typeof window<"u"},Se=function(t){return $(t)||G(t)},xi=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},J=Array.isArray,or=/(?:-?\.?\d|\.)+/gi,Ti=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Zt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ge=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ci=/[+-]=-?[.\d]+/,ki=/[^,'"\[\]\s]+/gi,es=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,q,yt,lr,kr,ut={},Fe={},Pi,Si=function(t){return(Fe=ae(t,ut))&&st},Pr=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ye=function(t,e){return!e&&console.warn(t)},Ai=function(t,e){return t&&(ut[t]=e)&&Fe&&(Fe[t]=e)||ut},be=function(){return 0},rs={suppressEvents:!0,isStart:!0,kill:!1},Ae={suppressEvents:!0,kill:!1},is={suppressEvents:!0},Sr={},Dt=[],cr={},Ei,at={},Ke={},Wr=30,Ee=[],Ar="",Er=function(t){var e=t[0],r,i;if(wt(e)||$(e)||(t=[t]),!(r=(e._gsap||{}).harness)){for(i=Ee.length;i--&&!Ee[i].targetTest(e););r=Ee[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Zi(t[i],r)))||t.splice(i,1);return t},Wt=function(t){return t._gsap||Er(pt(t))[0]._gsap},Oi=function(t,e,r){return(r=t[e])&&$(r)?t[e]():Tr(r)&&t.getAttribute&&t.getAttribute(e)||r},rt=function(t,e){return(t=t.split(",")).forEach(e)||t},W=function(t){return Math.round(t*1e5)/1e5||0},X=function(t){return Math.round(t*1e7)/1e7||0},ee=function(t,e){var r=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),r==="+"?t+i:r==="-"?t-i:r==="*"?t*i:t/i},ns=function(t,e){for(var r=e.length,i=0;t.indexOf(e[i])<0&&++i<r;);return i<r},Be=function(){var t=Dt.length,e=Dt.slice(0),r,i;for(cr={},Dt.length=0,r=0;r<t;r++)i=e[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},Or=function(t){return!!(t._initted||t._startAt||t.add)},Mi=function(t,e,r,i){Dt.length&&!K&&Be(),t.render(e,r,!!(K&&e<0&&Or(t))),Dt.length&&!K&&Be()},Ii=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(ki).length<2?e:G(t)?t.trim():t},Ri=function(t){return t},ht=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},ss=function(t){return function(e,r){for(var i in r)i in e||i==="duration"&&t||i==="ease"||(e[i]=r[i])}},ae=function(t,e){for(var r in e)t[r]=e[r];return t},Yr=function a(t,e){for(var r in e)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=wt(e[r])?a(t[r]||(t[r]={}),e[r]):e[r]);return t},ze=function(t,e){var r={},i;for(i in t)i in e||(r[i]=t[i]);return r},pe=function(t){var e=t.parent||q,r=t.keyframes?ss(J(t.keyframes)):ht;if(et(t.inherit))for(;e;)r(t,e.vars.defaults),e=e.parent||e._dp;return t},as=function(t,e){for(var r=t.length,i=r===e.length;i&&r--&&t[r]===e[r];);return r<0},Di=function(t,e,r,i,n){var s=t[i],o;if(n)for(o=e[n];s&&s[n]>o;)s=s._prev;return s?(e._next=s._next,s._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[i]=e,e._prev=s,e.parent=e._dp=t,e},We=function(t,e,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var n=e._prev,s=e._next;n?n._next=s:t[r]===e&&(t[r]=s),s?s._prev=n:t[i]===e&&(t[i]=n),e._next=e._prev=e.parent=null},Nt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Yt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},os=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},ur=function(t,e,r,i){return t._startAt&&(K?t._startAt.revert(Ae):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},ls=function a(t){return!t||t._ts&&a(t.parent)},Xr=function(t){return t._repeat?oe(t._tTime,t=t.duration()+t._rDelay)*t:0},oe=function(t,e){var r=Math.floor(t=X(t/e));return t&&r===t?r-1:r},Ue=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ye=function(t){return t._end=X(t._start+(t._tDur/Math.abs(t._ts||t._rts||R)||0))},Xe=function(t,e){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=X(r._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ye(t),r._dirty||Yt(r,t)),t},Li=function(t,e){var r;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(r=Ue(t.rawTime(),e),(!e._dur||ke(0,e.totalDuration(),r)-e._tTime>R)&&e.render(r,!0)),Yt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-R}},bt=function(t,e,r,i){return e.parent&&Nt(e),e._start=X((St(r)?r:r||t!==q?dt(t,r,e):t._time)+e._delay),e._end=X(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Di(t,e,"_first","_last",t._sort?"_start":0),hr(e)||(t._recent=e),i||Li(t,e),t._ts<0&&Xe(t,t._tTime),t},Ni=function(t,e){return(ut.ScrollTrigger||Pr("scrollTrigger",e))&&ut.ScrollTrigger.create(e,t)},Fi=function(t,e,r,i,n){if(Ir(t,e,n),!t._initted)return 1;if(!r&&t._pt&&!K&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Ei!==ot.frame)return Dt.push(t),t._lazy=[n,i],1},cs=function a(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||a(e))},hr=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},us=function(t,e,r,i){var n=t.ratio,s=e<0||!e&&(!t._start&&cs(t)&&!(!t._initted&&hr(t))||(t._ts<0||t._dp._ts<0)&&!hr(t))?0:1,o=t._rDelay,l=0,c,u,h;if(o&&t._repeat&&(l=ke(0,t._tDur,e),u=oe(l,o),t._yoyo&&u&1&&(s=1-s),u!==oe(t._tTime,o)&&(n=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==n||K||i||t._zTime===R||!e&&t._zTime){if(!t._initted&&Fi(t,e,i,r,l))return;for(h=t._zTime,t._zTime=e||(r?R:0),r||(r=e&&!h),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=l,c=t._pt;c;)c.r(s,c.d),c=c._next;e<0&&ur(t,e,r,!0),t._onUpdate&&!r&&lt(t,"onUpdate"),l&&t._repeat&&!r&&t.parent&&lt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(s&&Nt(t,1),!r&&!K&&(lt(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},hs=function(t,e,r){var i;if(r>e)for(i=t._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<e)return i;i=i._prev}},le=function(t,e,r,i){var n=t._repeat,s=X(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=n?n<0?1e10:X(s*(n+1)+t._rDelay*n):s,o>0&&!i&&Xe(t,t._tTime=t._tDur*o),t.parent&&Ye(t),r||Yt(t.parent,t),t},Gr=function(t){return t instanceof Z?Yt(t):le(t,t._dur)},fs={_start:0,endTime:be,totalDuration:be},dt=function a(t,e,r){var i=t.labels,n=t._recent||fs,s=t.duration()>=_t?n.endTime(!1):t._dur,o,l,c;return G(e)&&(isNaN(e)||e in i)?(l=e.charAt(0),c=e.substr(-1)==="%",o=e.indexOf("="),l==="<"||l===">"?(o>=0&&(e=e.replace(/=/,"")),(l==="<"?n._start:n.endTime(n._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(o<0?n:r).totalDuration()/100:1)):o<0?(e in i||(i[e]=s),i[e]):(l=parseFloat(e.charAt(o-1)+e.substr(o+1)),c&&r&&(l=l/100*(J(r)?r[0]:r).totalDuration()),o>1?a(t,e.substr(0,o-1),r)+l:s+l)):e==null?s:+e},ge=function(t,e,r){var i=St(e[1]),n=(i?2:1)+(t<2?0:1),s=e[n],o,l;if(i&&(s.duration=e[1]),s.parent=r,t){for(o=s,l=r;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=et(l.vars.inherit)&&l.parent;s.immediateRender=et(o.immediateRender),t<2?s.runBackwards=1:s.startAt=e[n-1]}return new Y(e[0],s,e[n+1])},Bt=function(t,e){return t||t===0?e(t):e},ke=function(t,e,r){return r<t?t:r>e?e:r},Q=function(t,e){return!G(t)||!(e=es.exec(t))?"":e[1]},ds=function(t,e,r){return Bt(r,function(i){return ke(t,e,i)})},fr=[].slice,Bi=function(t,e){return t&&wt(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&wt(t[0]))&&!t.nodeType&&t!==yt},_s=function(t,e,r){return r===void 0&&(r=[]),t.forEach(function(i){var n;return G(i)&&!e||Bi(i,1)?(n=r).push.apply(n,pt(i)):r.push(i)})||r},pt=function(t,e,r){return U&&!e&&U.selector?U.selector(t):G(t)&&!r&&(lr||!ce())?fr.call((e||kr).querySelectorAll(t),0):J(t)?_s(t,r):Bi(t)?fr.call(t,0):t?[t]:[]},dr=function(t){return t=pt(t)[0]||ye("Invalid scope")||{},function(e){var r=t.current||t.nativeElement||t;return pt(e,r.querySelectorAll?r:r===t?ye("Invalid scope")||kr.createElement("div"):t)}},zi=function(t){return t.sort(function(){return .5-Math.random()})},Ui=function(t){if($(t))return t;var e=wt(t)?t:{each:t},r=Xt(e.ease),i=e.from||0,n=parseFloat(e.base)||0,s={},o=i>0&&i<1,l=isNaN(i)||o,c=e.axis,u=i,h=i;return G(i)?u=h={center:.5,edges:.5,end:1}[i]||0:!o&&l&&(u=i[0],h=i[1]),function(d,_,p){var f=(p||e).length,g=s[f],y,v,C,P,m,x,T,k,w;if(!g){if(w=e.grid==="auto"?0:(e.grid||[1,_t])[1],!w){for(T=-_t;T<(T=p[w++].getBoundingClientRect().left)&&w<f;);w<f&&w--}for(g=s[f]=[],y=l?Math.min(w,f)*u-.5:i%w,v=w===_t?0:l?f*h/w-.5:i/w|0,T=0,k=_t,x=0;x<f;x++)C=x%w-y,P=v-(x/w|0),g[x]=m=c?Math.abs(c==="y"?P:C):wi(C*C+P*P),m>T&&(T=m),m<k&&(k=m);i==="random"&&zi(g),g.max=T-k,g.min=k,g.v=f=(parseFloat(e.amount)||parseFloat(e.each)*(w>f?f-1:c?c==="y"?f/w:w:Math.max(w,f/w))||0)*(i==="edges"?-1:1),g.b=f<0?n-f:n,g.u=Q(e.amount||e.each)||0,r=r&&f<0?ji(r):r}return f=(g[d]-g.min)/g.max||0,X(g.b+(r?r(f):f)*g.v)+g.u}},_r=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=X(Math.round(parseFloat(r)/t)*t*e);return(i-i%1)/e+(St(r)?0:Q(r))}},qi=function(t,e){var r=J(t),i,n;return!r&&wt(t)&&(i=r=t.radius||_t,t.values?(t=pt(t.values),(n=!St(t[0]))&&(i*=i)):t=_r(t.increment)),Bt(e,r?$(t)?function(s){return n=t(s),Math.abs(n-s)<=i?n:s}:function(s){for(var o=parseFloat(n?s.x:s),l=parseFloat(n?s.y:0),c=_t,u=0,h=t.length,d,_;h--;)n?(d=t[h].x-o,_=t[h].y-l,d=d*d+_*_):d=Math.abs(t[h]-o),d<c&&(c=d,u=h);return u=!i||c<=i?t[u]:s,n||u===s||St(s)?u:u+Q(s)}:_r(t))},Hi=function(t,e,r,i){return Bt(J(t)?!e:r===!0?!!(r=0):!i,function(){return J(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(e-t+r*.99))/r)*r*i)/i})},ps=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return e.reduce(function(n,s){return s(n)},i)}},gs=function(t,e){return function(r){return t(parseFloat(r))+(e||Q(r))}},ms=function(t,e,r){return Vi(t,e,0,1,r)},$i=function(t,e,r){return Bt(r,function(i){return t[~~e(i)]})},ys=function a(t,e,r){var i=e-t;return J(t)?$i(t,a(0,t.length),e):Bt(r,function(n){return(i+(n-t)%i)%i+t})},bs=function a(t,e,r){var i=e-t,n=i*2;return J(t)?$i(t,a(0,t.length-1),e):Bt(r,function(s){return s=(n+(s-t)%n)%n||0,t+(s>i?n-s:s)})},ve=function(t){for(var e=0,r="",i,n,s,o;~(i=t.indexOf("random(",e));)s=t.indexOf(")",i),o=t.charAt(i+7)==="[",n=t.substr(i+7,s-i-7).match(o?ki:or),r+=t.substr(e,i-e)+Hi(o?n:+n[0],o?0:+n[1],+n[2]||1e-5),e=s+1;return r+t.substr(e,t.length-e)},Vi=function(t,e,r,i,n){var s=e-t,o=i-r;return Bt(n,function(l){return r+((l-t)/s*o||0)})},vs=function a(t,e,r,i){var n=isNaN(t+e)?0:function(_){return(1-_)*t+_*e};if(!n){var s=G(t),o={},l,c,u,h,d;if(r===!0&&(i=1)&&(r=null),s)t={p:t},e={p:e};else if(J(t)&&!J(e)){for(u=[],h=t.length,d=h-2,c=1;c<h;c++)u.push(a(t[c-1],t[c]));h--,n=function(p){p*=h;var f=Math.min(d,~~p);return u[f](p-f)},r=e}else i||(t=ae(J(t)?[]:{},t));if(!u){for(l in e)Mr.call(o,t,l,"get",e[l]);n=function(p){return Lr(p,o)||(s?t.p:t)}}}return Bt(r,n)},Kr=function(t,e,r){var i=t.labels,n=_t,s,o,l;for(s in i)o=i[s]-e,o<0==!!r&&o&&n>(o=Math.abs(o))&&(l=s,n=o);return l},lt=function(t,e,r){var i=t.vars,n=i[e],s=U,o=t._ctx,l,c,u;if(n)return l=i[e+"Params"],c=i.callbackScope||t,r&&Dt.length&&Be(),o&&(U=o),u=l?n.apply(c,l):n.call(c),U=s,u},de=function(t){return Nt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!K),t.progress()<1&&lt(t,"onInterrupt"),t},te,Wi=[],Yi=function(t){if(t)if(t=!t.name&&t.default||t,Cr()||t.headless){var e=t.name,r=$(t),i=e&&!r&&t.init?function(){this._props=[]}:t,n={init:be,render:Lr,add:Mr,kill:Ns,modifier:Ls,rawVars:0},s={targetTest:0,get:0,getSetter:Dr,aliases:{},register:0};if(ce(),t!==i){if(at[e])return;ht(i,ht(ze(t,n),s)),ae(i.prototype,ae(n,ze(t,s))),at[i.prop=e]=i,t.targetTest&&(Ee.push(i),Sr[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Ai(e,i),t.register&&t.register(st,i,it)}else Wi.push(t)},I=255,_e={aqua:[0,I,I],lime:[0,I,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,I],navy:[0,0,128],white:[I,I,I],olive:[128,128,0],yellow:[I,I,0],orange:[I,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[I,0,0],pink:[I,192,203],cyan:[0,I,I],transparent:[I,I,I,0]},je=function(t,e,r){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(r-e)*t*6:t<.5?r:t*3<2?e+(r-e)*(2/3-t)*6:e)*I+.5|0},Xi=function(t,e,r){var i=t?St(t)?[t>>16,t>>8&I,t&I]:0:_e.black,n,s,o,l,c,u,h,d,_,p;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),_e[t])i=_e[t];else if(t.charAt(0)==="#"){if(t.length<6&&(n=t.charAt(1),s=t.charAt(2),o=t.charAt(3),t="#"+n+n+s+s+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&I,i&I,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&I,t&I]}else if(t.substr(0,3)==="hsl"){if(i=p=t.match(or),!e)l=+i[0]%360/360,c=+i[1]/100,u=+i[2]/100,s=u<=.5?u*(c+1):u+c-u*c,n=u*2-s,i.length>3&&(i[3]*=1),i[0]=je(l+1/3,n,s),i[1]=je(l,n,s),i[2]=je(l-1/3,n,s);else if(~t.indexOf("="))return i=t.match(Ti),r&&i.length<4&&(i[3]=1),i}else i=t.match(or)||_e.transparent;i=i.map(Number)}return e&&!p&&(n=i[0]/I,s=i[1]/I,o=i[2]/I,h=Math.max(n,s,o),d=Math.min(n,s,o),u=(h+d)/2,h===d?l=c=0:(_=h-d,c=u>.5?_/(2-h-d):_/(h+d),l=h===n?(s-o)/_+(s<o?6:0):h===s?(o-n)/_+2:(n-s)/_+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(u*100+.5)),r&&i.length<4&&(i[3]=1),i},Gi=function(t){var e=[],r=[],i=-1;return t.split(Lt).forEach(function(n){var s=n.match(Zt)||[];e.push.apply(e,s),r.push(i+=s.length+1)}),e.c=r,e},jr=function(t,e,r){var i="",n=(t+i).match(Lt),s=e?"hsla(":"rgba(",o=0,l,c,u,h;if(!n)return t;if(n=n.map(function(d){return(d=Xi(d,e,1))&&s+(e?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),r&&(u=Gi(t),l=r.c,l.join(i)!==u.c.join(i)))for(c=t.replace(Lt,"1").split(Zt),h=c.length-1;o<h;o++)i+=c[o]+(~l.indexOf(o)?n.shift()||s+"0,0,0,0)":(u.length?u:n.length?n:r).shift());if(!c)for(c=t.split(Lt),h=c.length-1;o<h;o++)i+=c[o]+n[o];return i+c[h]},Lt=function(){var a="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in _e)a+="|"+t+"\\b";return new RegExp(a+")","gi")}(),ws=/hsl[a]?\(/,Ki=function(t){var e=t.join(" "),r;if(Lt.lastIndex=0,Lt.test(e))return r=ws.test(e),t[1]=jr(t[1],r),t[0]=jr(t[0],r,Gi(t[1])),!0},we,ot=function(){var a=Date.now,t=500,e=33,r=a(),i=r,n=1e3/240,s=n,o=[],l,c,u,h,d,_,p=function f(g){var y=a()-i,v=g===!0,C,P,m,x;if((y>t||y<0)&&(r+=y-e),i+=y,m=i-r,C=m-s,(C>0||v)&&(x=++h.frame,d=m-h.time*1e3,h.time=m=m/1e3,s+=C+(C>=n?4:n-C),P=1),v||(l=c(f)),P)for(_=0;_<o.length;_++)o[_](m,d,x,g)};return h={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){Pi&&(!lr&&Cr()&&(yt=lr=window,kr=yt.document||{},ut.gsap=st,(yt.gsapVersions||(yt.gsapVersions=[])).push(st.version),Si(Fe||yt.GreenSockGlobals||!yt.gsap&&yt||{}),Wi.forEach(Yi)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(g){return setTimeout(g,s-h.time*1e3+1|0)},we=1,p(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),we=0,c=be},lagSmoothing:function(g,y){t=g||1/0,e=Math.min(y||33,t)},fps:function(g){n=1e3/(g||240),s=h.time*1e3+n},add:function(g,y,v){var C=y?function(P,m,x,T){g(P,m,x,T),h.remove(C)}:g;return h.remove(g),o[v?"unshift":"push"](C),ce(),C},remove:function(g,y){~(y=o.indexOf(g))&&o.splice(y,1)&&_>=y&&_--},_listeners:o},h}(),ce=function(){return!we&&ot.wake()},O={},xs=/^[\d.\-M][\d.\-,\s]/,Ts=/["']/g,Cs=function(t){for(var e={},r=t.substr(1,t.length-3).split(":"),i=r[0],n=1,s=r.length,o,l,c;n<s;n++)l=r[n],o=n!==s-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),e[i]=isNaN(c)?c.replace(Ts,"").trim():+c,i=l.substr(o+1).trim();return e},ks=function(t){var e=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",e);return t.substring(e,~i&&i<r?t.indexOf(")",r+1):r)},Ps=function(t){var e=(t+"").split("("),r=O[e[0]];return r&&e.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[Cs(e[1])]:ks(t).split(",").map(Ii)):O._CE&&xs.test(t)?O._CE("",t):r},ji=function(t){return function(e){return 1-t(1-e)}},Qi=function a(t,e){for(var r=t._first,i;r;)r instanceof Z?a(r,e):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==e&&(r.timeline?a(r.timeline,e):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=e)),r=r._next},Xt=function(t,e){return t&&($(t)?t:O[t]||Ps(t))||e},jt=function(t,e,r,i){r===void 0&&(r=function(l){return 1-e(1-l)}),i===void 0&&(i=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var n={easeIn:e,easeOut:r,easeInOut:i},s;return rt(t,function(o){O[o]=ut[o]=n,O[s=o.toLowerCase()]=r;for(var l in n)O[s+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=O[o+"."+l]=n[l]}),n},Ji=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Qe=function a(t,e,r){var i=e>=1?e:1,n=(r||(t?.3:.45))/(e<1?e:1),s=n/ar*(Math.asin(1/i)||0),o=function(u){return u===1?1:i*Math.pow(2,-10*u)*ts((u-s)*n)+1},l=t==="out"?o:t==="in"?function(c){return 1-o(1-c)}:Ji(o);return n=ar/n,l.config=function(c,u){return a(t,c,u)},l},Je=function a(t,e){e===void 0&&(e=1.70158);var r=function(s){return s?--s*s*((e+1)*s+e)+1:0},i=t==="out"?r:t==="in"?function(n){return 1-r(1-n)}:Ji(r);return i.config=function(n){return a(t,n)},i};rt("Linear,Quad,Cubic,Quart,Quint,Strong",function(a,t){var e=t<5?t+1:t;jt(a+",Power"+(e-1),t?function(r){return Math.pow(r,e)}:function(r){return r},function(r){return 1-Math.pow(1-r,e)},function(r){return r<.5?Math.pow(r*2,e)/2:1-Math.pow((1-r)*2,e)/2})});O.Linear.easeNone=O.none=O.Linear.easeIn;jt("Elastic",Qe("in"),Qe("out"),Qe());(function(a,t){var e=1/t,r=2*e,i=2.5*e,n=function(o){return o<e?a*o*o:o<r?a*Math.pow(o-1.5/t,2)+.75:o<i?a*(o-=2.25/t)*o+.9375:a*Math.pow(o-2.625/t,2)+.984375};jt("Bounce",function(s){return 1-n(1-s)},n)})(7.5625,2.75);jt("Expo",function(a){return Math.pow(2,10*(a-1))*a+a*a*a*a*a*a*(1-a)});jt("Circ",function(a){return-(wi(1-a*a)-1)});jt("Sine",function(a){return a===1?1:-Zn(a*Qn)+1});jt("Back",Je("in"),Je("out"),Je());O.SteppedEase=O.steps=ut.SteppedEase={config:function(t,e){t===void 0&&(t=1);var r=1/t,i=t+(e?0:1),n=e?1:0,s=1-R;return function(o){return((i*ke(0,s,o)|0)+n)*r}}};se.ease=O["quad.out"];rt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(a){return Ar+=a+","+a+"Params,"});var Zi=function(t,e){this.id=Jn++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Oi,this.set=e?e.getSetter:Dr},xe=function(){function a(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,le(this,+e.duration,1,1),this.data=e.data,U&&(this._ctx=U,U.data.push(this)),we||ot.wake()}var t=a.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,le(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,i){if(ce(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Xe(this,r),!n._dp||n.parent||Li(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&bt(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===R||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),Mi(this,r,i)),this},t.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Xr(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},t.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Xr(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,i){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*n,i):this._repeat?oe(this._tTime,n)+1:1},t.timeScale=function(r,i){if(!arguments.length)return this._rts===-R?0:this._rts;if(this._rts===r)return this;var n=this.parent&&this._ts?Ue(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-R?0:this._rts,this.totalTime(ke(-Math.abs(this._delay),this.totalDuration(),n),i!==!1),Ye(this),os(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ce(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==R&&(this._tTime-=R)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&bt(i,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(et(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ue(i.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=is);var i=K;return K=r,Or(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),K=i,this},t.globalTime=function(r){for(var i=this,n=arguments.length?r:i.rawTime();i;)n=i._start+n/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):n},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Gr(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Gr(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,i){return this.totalTime(dt(this,r),et(i))},t.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,et(i)),this._dur||(this._zTime=-R),this},t.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},t.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-R:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-R,this},t.isActive=function(){var r=this.parent||this._dp,i=this._start,n;return!!(!r||this._ts&&this._initted&&r.isActive()&&(n=r.rawTime(!0))>=i&&n<this.endTime(!0)-R)},t.eventCallback=function(r,i,n){var s=this.vars;return arguments.length>1?(i?(s[r]=i,n&&(s[r+"Params"]=n),r==="onUpdate"&&(this._onUpdate=i)):delete s[r],this):s[r]},t.then=function(r){var i=this;return new Promise(function(n){var s=$(r)?r:Ri,o=function(){var c=i.then;i.then=null,$(s)&&(s=s(i))&&(s.then||s===i)&&(i.then=c),n(s),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},t.kill=function(){de(this)},a}();ht(xe.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-R,_prom:0,_ps:!1,_rts:1});var Z=function(a){vi(t,a);function t(r,i){var n;return r===void 0&&(r={}),n=a.call(this,r)||this,n.labels={},n.smoothChildTiming=!!r.smoothChildTiming,n.autoRemoveChildren=!!r.autoRemoveChildren,n._sort=et(r.sortChildren),q&&bt(r.parent||q,Tt(n),i),r.reversed&&n.reverse(),r.paused&&n.paused(!0),r.scrollTrigger&&Ni(Tt(n),r.scrollTrigger),n}var e=t.prototype;return e.to=function(i,n,s){return ge(0,arguments,this),this},e.from=function(i,n,s){return ge(1,arguments,this),this},e.fromTo=function(i,n,s,o){return ge(2,arguments,this),this},e.set=function(i,n,s){return n.duration=0,n.parent=this,pe(n).repeatDelay||(n.repeat=0),n.immediateRender=!!n.immediateRender,new Y(i,n,dt(this,s),1),this},e.call=function(i,n,s){return bt(this,Y.delayedCall(0,i,n),s)},e.staggerTo=function(i,n,s,o,l,c,u){return s.duration=n,s.stagger=s.stagger||o,s.onComplete=c,s.onCompleteParams=u,s.parent=this,new Y(i,s,dt(this,l)),this},e.staggerFrom=function(i,n,s,o,l,c,u){return s.runBackwards=1,pe(s).immediateRender=et(s.immediateRender),this.staggerTo(i,n,s,o,l,c,u)},e.staggerFromTo=function(i,n,s,o,l,c,u,h){return o.startAt=s,pe(o).immediateRender=et(o.immediateRender),this.staggerTo(i,n,o,l,c,u,h)},e.render=function(i,n,s){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:X(i),h=this._zTime<0!=i<0&&(this._initted||!c),d,_,p,f,g,y,v,C,P,m,x,T;if(this!==q&&u>l&&i>=0&&(u=l),u!==this._tTime||s||h){if(o!==this._time&&c&&(u+=this._time-o,i+=this._time-o),d=u,P=this._start,C=this._ts,y=!C,h&&(c||(o=this._zTime),(i||!n)&&(this._zTime=i)),this._repeat){if(x=this._yoyo,g=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,n,s);if(d=X(u%g),u===l?(f=this._repeat,d=c):(m=X(u/g),f=~~m,f&&f===m&&(d=c,f--),d>c&&(d=c)),m=oe(this._tTime,g),!o&&this._tTime&&m!==f&&this._tTime-m*g-this._dur<=0&&(m=f),x&&f&1&&(d=c-d,T=1),f!==m&&!this._lock){var k=x&&m&1,w=k===(x&&f&1);if(f<m&&(k=!k),o=k?0:u%c?c:u,this._lock=1,this.render(o||(T?0:X(f*g)),n,!c)._lock=0,this._tTime=u,!n&&this.parent&&lt(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),o&&o!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,w&&(this._lock=2,o=k?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;Qi(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=hs(this,X(o),X(d)),v&&(u-=d-(d=v._start))),this._tTime=u,this._time=d,this._act=!C,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&u&&!n&&!m&&(lt(this,"onStart"),this._tTime!==u))return this;if(d>=o&&i>=0)for(_=this._first;_;){if(p=_._next,(_._act||d>=_._start)&&_._ts&&v!==_){if(_.parent!==this)return this.render(i,n,s);if(_.render(_._ts>0?(d-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(d-_._start)*_._ts,n,s),d!==this._time||!this._ts&&!y){v=0,p&&(u+=this._zTime=-R);break}}_=p}else{_=this._last;for(var E=i<0?i:d;_;){if(p=_._prev,(_._act||E<=_._end)&&_._ts&&v!==_){if(_.parent!==this)return this.render(i,n,s);if(_.render(_._ts>0?(E-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(E-_._start)*_._ts,n,s||K&&Or(_)),d!==this._time||!this._ts&&!y){v=0,p&&(u+=this._zTime=E?-R:R);break}}_=p}}if(v&&!n&&(this.pause(),v.render(d>=o?0:-R)._zTime=d>=o?1:-1,this._ts))return this._start=P,Ye(this),this.render(i,n,s);this._onUpdate&&!n&&lt(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&o)&&(P===this._start||Math.abs(C)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Nt(this,1),!n&&!(i<0&&!o)&&(u||o||!l)&&(lt(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(i,n){var s=this;if(St(n)||(n=dt(this,n,i)),!(i instanceof xe)){if(J(i))return i.forEach(function(o){return s.add(o,n)}),this;if(G(i))return this.addLabel(i,n);if($(i))i=Y.delayedCall(0,i);else return this}return this!==i?bt(this,i,n):this},e.getChildren=function(i,n,s,o){i===void 0&&(i=!0),n===void 0&&(n=!0),s===void 0&&(s=!0),o===void 0&&(o=-_t);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof Y?n&&l.push(c):(s&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,n,s)))),c=c._next;return l},e.getById=function(i){for(var n=this.getChildren(1,1,1),s=n.length;s--;)if(n[s].vars.id===i)return n[s]},e.remove=function(i){return G(i)?this.removeLabel(i):$(i)?this.killTweensOf(i):(i.parent===this&&We(this,i),i===this._recent&&(this._recent=this._last),Yt(this))},e.totalTime=function(i,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=X(ot.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),a.prototype.totalTime.call(this,i,n),this._forcing=0,this):this._tTime},e.addLabel=function(i,n){return this.labels[i]=dt(this,n),this},e.removeLabel=function(i){return delete this.labels[i],this},e.addPause=function(i,n,s){var o=Y.delayedCall(0,n||be,s);return o.data="isPause",this._hasPause=1,bt(this,o,dt(this,i))},e.removePause=function(i){var n=this._first;for(i=dt(this,i);n;)n._start===i&&n.data==="isPause"&&Nt(n),n=n._next},e.killTweensOf=function(i,n,s){for(var o=this.getTweensOf(i,s),l=o.length;l--;)Mt!==o[l]&&o[l].kill(i,n);return this},e.getTweensOf=function(i,n){for(var s=[],o=pt(i),l=this._first,c=St(n),u;l;)l instanceof Y?ns(l._targets,o)&&(c?(!Mt||l._initted&&l._ts)&&l.globalTime(0)<=n&&l.globalTime(l.totalDuration())>n:!n||l.isActive())&&s.push(l):(u=l.getTweensOf(o,n)).length&&s.push.apply(s,u),l=l._next;return s},e.tweenTo=function(i,n){n=n||{};var s=this,o=dt(s,i),l=n,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,_,p=Y.to(s,ht({ease:n.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:n.duration||Math.abs((o-(c&&"time"in c?c.time:s._time))/s.timeScale())||R,onStart:function(){if(s.pause(),!_){var g=n.duration||Math.abs((o-(c&&"time"in c?c.time:s._time))/s.timeScale());p._dur!==g&&le(p,g,0,1).render(p._time,!0,!0),_=1}u&&u.apply(p,h||[])}},n));return d?p.render(0):p},e.tweenFromTo=function(i,n,s){return this.tweenTo(n,ht({startAt:{time:dt(this,i)}},s))},e.recent=function(){return this._recent},e.nextLabel=function(i){return i===void 0&&(i=this._time),Kr(this,dt(this,i))},e.previousLabel=function(i){return i===void 0&&(i=this._time),Kr(this,dt(this,i),1)},e.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+R)},e.shiftChildren=function(i,n,s){s===void 0&&(s=0);for(var o=this._first,l=this.labels,c;o;)o._start>=s&&(o._start+=i,o._end+=i),o=o._next;if(n)for(c in l)l[c]>=s&&(l[c]+=i);return Yt(this)},e.invalidate=function(i){var n=this._first;for(this._lock=0;n;)n.invalidate(i),n=n._next;return a.prototype.invalidate.call(this,i)},e.clear=function(i){i===void 0&&(i=!0);for(var n=this._first,s;n;)s=n._next,this.remove(n),n=s;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Yt(this)},e.totalDuration=function(i){var n=0,s=this,o=s._last,l=_t,c,u,h;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-i:i));if(s._dirty){for(h=s.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),u=o._start,u>l&&s._sort&&o._ts&&!s._lock?(s._lock=1,bt(s,o,u-o._delay,1)._lock=0):l=u,u<0&&o._ts&&(n-=u,(!h&&!s._dp||h&&h.smoothChildTiming)&&(s._start+=u/s._ts,s._time-=u,s._tTime-=u),s.shiftChildren(-u,!1,-1/0),l=0),o._end>n&&o._ts&&(n=o._end),o=c;le(s,s===q&&s._time>n?s._time:n,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(i){if(q._ts&&(Mi(q,Ue(i,q)),Ei=ot.frame),ot.frame>=Wr){Wr+=ct.autoSleep||120;var n=q._first;if((!n||!n._ts)&&ct.autoSleep&&ot._listeners.length<2){for(;n&&!n._ts;)n=n._next;n||ot.sleep()}}},t}(xe);ht(Z.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ss=function(t,e,r,i,n,s,o){var l=new it(this._pt,t,e,0,1,an,null,n),c=0,u=0,h,d,_,p,f,g,y,v;for(l.b=r,l.e=i,r+="",i+="",(y=~i.indexOf("random("))&&(i=ve(i)),s&&(v=[r,i],s(v,t,e),r=v[0],i=v[1]),d=r.match(Ge)||[];h=Ge.exec(i);)p=h[0],f=i.substring(c,h.index),_?_=(_+1)%5:f.substr(-5)==="rgba("&&(_=1),p!==d[u++]&&(g=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:f||u===1?f:",",s:g,c:p.charAt(1)==="="?ee(g,p)-g:parseFloat(p)-g,m:_&&_<4?Math.round:0},c=Ge.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=o,(Ci.test(i)||y)&&(l.e=0),this._pt=l,l},Mr=function(t,e,r,i,n,s,o,l,c,u){$(i)&&(i=i(n||0,t,s));var h=t[e],d=r!=="get"?r:$(h)?c?t[e.indexOf("set")||!$(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():h,_=$(h)?c?Is:nn:Rr,p;if(G(i)&&(~i.indexOf("random(")&&(i=ve(i)),i.charAt(1)==="="&&(p=ee(d,i)+(Q(d)||0),(p||p===0)&&(i=p))),!u||d!==i||pr)return!isNaN(d*i)&&i!==""?(p=new it(this._pt,t,e,+d||0,i-(d||0),typeof h=="boolean"?Ds:sn,0,_),c&&(p.fp=c),o&&p.modifier(o,this,t),this._pt=p):(!h&&!(e in t)&&Pr(e,i),Ss.call(this,t,e,d,i,_,l||ct.stringFilter,c))},As=function(t,e,r,i,n){if($(t)&&(t=me(t,n,e,r,i)),!wt(t)||t.style&&t.nodeType||J(t)||xi(t))return G(t)?me(t,n,e,r,i):t;var s={},o;for(o in t)s[o]=me(t[o],n,e,r,i);return s},tn=function(t,e,r,i,n,s){var o,l,c,u;if(at[t]&&(o=new at[t]).init(n,o.rawVars?e[t]:As(e[t],i,n,s,r),r,i,s)!==!1&&(r._pt=l=new it(r._pt,n,t,0,1,o.render,o,0,o.priority),r!==te))for(c=r._ptLookup[r._targets.indexOf(n)],u=o._props.length;u--;)c[o._props[u]]=l;return o},Mt,pr,Ir=function a(t,e,r){var i=t.vars,n=i.ease,s=i.startAt,o=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.runBackwards,h=i.yoyoEase,d=i.keyframes,_=i.autoRevert,p=t._dur,f=t._startAt,g=t._targets,y=t.parent,v=y&&y.data==="nested"?y.vars.targets:g,C=t._overwrite==="auto"&&!xr,P=t.timeline,m,x,T,k,w,E,D,M,A,L,N,F,B;if(P&&(!d||!n)&&(n="none"),t._ease=Xt(n,se.ease),t._yEase=h?ji(Xt(h===!0?n:h,se.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!P&&!!i.runBackwards,!P||d&&!i.stagger){if(M=g[0]?Wt(g[0]).harness:0,F=M&&i[M.prop],m=ze(i,Sr),f&&(f._zTime<0&&f.progress(1),e<0&&u&&o&&!_?f.render(-1,!0):f.revert(u&&p?Ae:rs),f._lazy=0),s){if(Nt(t._startAt=Y.set(g,ht({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!f&&et(l),startAt:null,delay:0,onUpdate:c&&function(){return lt(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(K||!o&&!_)&&t._startAt.revert(Ae),o&&p&&e<=0&&r<=0){e&&(t._zTime=e);return}}else if(u&&p&&!f){if(e&&(o=!1),T=ht({overwrite:!1,data:"isFromStart",lazy:o&&!f&&et(l),immediateRender:o,stagger:0,parent:y},m),F&&(T[M.prop]=F),Nt(t._startAt=Y.set(g,T)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(K?t._startAt.revert(Ae):t._startAt.render(-1,!0)),t._zTime=e,!o)a(t._startAt,R,R);else if(!e)return}for(t._pt=t._ptCache=0,l=p&&et(l)||l&&!p,x=0;x<g.length;x++){if(w=g[x],D=w._gsap||Er(g)[x]._gsap,t._ptLookup[x]=L={},cr[D.id]&&Dt.length&&Be(),N=v===g?x:v.indexOf(w),M&&(A=new M).init(w,F||m,t,N,v)!==!1&&(t._pt=k=new it(t._pt,w,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(tt){L[tt]=k}),A.priority&&(E=1)),!M||F)for(T in m)at[T]&&(A=tn(T,m,t,N,w,v))?A.priority&&(E=1):L[T]=k=Mr.call(t,w,T,"get",m[T],N,v,0,i.stringFilter);t._op&&t._op[x]&&t.kill(w,t._op[x]),C&&t._pt&&(Mt=t,q.killTweensOf(w,L,t.globalTime(e)),B=!t.parent,Mt=0),t._pt&&l&&(cr[D.id]=1)}E&&on(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!B,d&&e<=0&&P.render(_t,!0,!0)},Es=function(t,e,r,i,n,s,o,l){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],u,h,d,_;if(!c)for(c=t._ptCache[e]=[],d=t._ptLookup,_=t._targets.length;_--;){if(u=d[_][e],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return pr=1,t.vars[e]="+=0",Ir(t,o),pr=0,l?ye(e+" not eligible for reset"):1;c.push(u)}for(_=c.length;_--;)h=c[_],u=h._pt||h,u.s=(i||i===0)&&!n?i:u.s+(i||0)+s*u.c,u.c=r-u.s,h.e&&(h.e=W(r)+Q(h.e)),h.b&&(h.b=u.s+Q(h.b))},Os=function(t,e){var r=t[0]?Wt(t[0]).harness:0,i=r&&r.aliases,n,s,o,l;if(!i)return e;n=ae({},e);for(s in i)if(s in n)for(l=i[s].split(","),o=l.length;o--;)n[l[o]]=n[s];return n},Ms=function(t,e,r,i){var n=e.ease||i||"power1.inOut",s,o;if(J(e))o=r[t]||(r[t]=[]),e.forEach(function(l,c){return o.push({t:c/(e.length-1)*100,v:l,e:n})});else for(s in e)o=r[s]||(r[s]=[]),s==="ease"||o.push({t:parseFloat(t),v:e[s],e:n})},me=function(t,e,r,i,n){return $(t)?t.call(e,r,i,n):G(t)&&~t.indexOf("random(")?ve(t):t},en=Ar+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",rn={};rt(en+",id,stagger,delay,duration,paused,scrollTrigger",function(a){return rn[a]=1});var Y=function(a){vi(t,a);function t(r,i,n,s){var o;typeof i=="number"&&(n.duration=i,i=n,n=null),o=a.call(this,s?i:pe(i))||this;var l=o.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,_=l.overwrite,p=l.keyframes,f=l.defaults,g=l.scrollTrigger,y=l.yoyoEase,v=i.parent||q,C=(J(r)||xi(r)?St(r[0]):"length"in i)?[r]:pt(r),P,m,x,T,k,w,E,D;if(o._targets=C.length?Er(C):ye("GSAP target "+r+" not found. https://gsap.com",!ct.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=_,p||d||Se(c)||Se(u)){if(i=o.vars,P=o.timeline=new Z({data:"nested",defaults:f||{},targets:v&&v.data==="nested"?v.vars.targets:C}),P.kill(),P.parent=P._dp=Tt(o),P._start=0,d||Se(c)||Se(u)){if(T=C.length,E=d&&Ui(d),wt(d))for(k in d)~en.indexOf(k)&&(D||(D={}),D[k]=d[k]);for(m=0;m<T;m++)x=ze(i,rn),x.stagger=0,y&&(x.yoyoEase=y),D&&ae(x,D),w=C[m],x.duration=+me(c,Tt(o),m,w,C),x.delay=(+me(u,Tt(o),m,w,C)||0)-o._delay,!d&&T===1&&x.delay&&(o._delay=u=x.delay,o._start+=u,x.delay=0),P.to(w,x,E?E(m,w,C):0),P._ease=O.none;P.duration()?c=u=0:o.timeline=0}else if(p){pe(ht(P.vars.defaults,{ease:"none"})),P._ease=Xt(p.ease||i.ease||"none");var M=0,A,L,N;if(J(p))p.forEach(function(F){return P.to(C,F,">")}),P.duration();else{x={};for(k in p)k==="ease"||k==="easeEach"||Ms(k,p[k],x,p.easeEach);for(k in x)for(A=x[k].sort(function(F,B){return F.t-B.t}),M=0,m=0;m<A.length;m++)L=A[m],N={ease:L.e,duration:(L.t-(m?A[m-1].t:0))/100*c},N[k]=L.v,P.to(C,N,M),M+=N.duration;P.duration()<c&&P.to({},{duration:c-P.duration()})}}c||o.duration(c=P.duration())}else o.timeline=0;return _===!0&&!xr&&(Mt=Tt(o),q.killTweensOf(C),Mt=0),bt(v,Tt(o),n),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(h||!c&&!p&&o._start===X(v._time)&&et(h)&&ls(Tt(o))&&v.data!=="nested")&&(o._tTime=-R,o.render(Math.max(0,-u)||0)),g&&Ni(Tt(o),g),o}var e=t.prototype;return e.render=function(i,n,s){var o=this._time,l=this._tDur,c=this._dur,u=i<0,h=i>l-R&&!u?l:i<R?0:i,d,_,p,f,g,y,v,C,P;if(!c)us(this,i,n,s);else if(h!==this._tTime||!i||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(d=h,C=this.timeline,this._repeat){if(f=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(f*100+i,n,s);if(d=X(h%f),h===l?(p=this._repeat,d=c):(g=X(h/f),p=~~g,p&&p===g?(d=c,p--):d>c&&(d=c)),y=this._yoyo&&p&1,y&&(P=this._yEase,d=c-d),g=oe(this._tTime,f),d===o&&!s&&this._initted&&p===g)return this._tTime=h,this;p!==g&&(C&&this._yEase&&Qi(C,y),this.vars.repeatRefresh&&!y&&!this._lock&&d!==f&&this._initted&&(this._lock=s=1,this.render(X(f*p),!0).invalidate()._lock=0))}if(!this._initted){if(Fi(this,u?i:d,s,n,h))return this._tTime=0,this;if(o!==this._time&&!(s&&this.vars.repeatRefresh&&p!==g))return this;if(c!==this._dur)return this.render(i,n,s)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(P||this._ease)(d/c),this._from&&(this.ratio=v=1-v),!o&&h&&!n&&!g&&(lt(this,"onStart"),this._tTime!==h))return this;for(_=this._pt;_;)_.r(v,_.d),_=_._next;C&&C.render(i<0?i:C._dur*C._ease(d/this._dur),n,s)||this._startAt&&(this._zTime=i),this._onUpdate&&!n&&(u&&ur(this,i,n,s),lt(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!n&&this.parent&&lt(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&ur(this,i,!0,!0),(i||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Nt(this,1),!n&&!(u&&!o)&&(h||o||y)&&(lt(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),a.prototype.invalidate.call(this,i)},e.resetTo=function(i,n,s,o,l){we||ot.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||Ir(this,c),u=this._ease(c/this._dur),Es(this,i,n,s,o,u,c,l)?this.resetTo(i,n,s,o,1):(Xe(this,0),this.parent||Di(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(i,n){if(n===void 0&&(n="all"),!i&&(!n||n==="all"))return this._lazy=this._pt=0,this.parent?de(this):this.scrollTrigger&&this.scrollTrigger.kill(!!K),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(i,n,Mt&&Mt.vars.overwrite!==!0)._first||de(this),this.parent&&s!==this.timeline.totalDuration()&&le(this,this._dur*this.timeline._tDur/s,0,1),this}var o=this._targets,l=i?pt(i):o,c=this._ptLookup,u=this._pt,h,d,_,p,f,g,y;if((!n||n==="all")&&as(o,l))return n==="all"&&(this._pt=0),de(this);for(h=this._op=this._op||[],n!=="all"&&(G(n)&&(f={},rt(n,function(v){return f[v]=1}),n=f),n=Os(o,n)),y=o.length;y--;)if(~l.indexOf(o[y])){d=c[y],n==="all"?(h[y]=n,p=d,_={}):(_=h[y]=h[y]||{},p=n);for(f in p)g=d&&d[f],g&&((!("kill"in g.d)||g.d.kill(f)===!0)&&We(this,g,"_pt"),delete d[f]),_!=="all"&&(_[f]=1)}return this._initted&&!this._pt&&u&&de(this),this},t.to=function(i,n){return new t(i,n,arguments[2])},t.from=function(i,n){return ge(1,arguments)},t.delayedCall=function(i,n,s,o){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:n,onReverseComplete:n,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:o})},t.fromTo=function(i,n,s){return ge(2,arguments)},t.set=function(i,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(i,n)},t.killTweensOf=function(i,n,s){return q.killTweensOf(i,n,s)},t}(xe);ht(Y.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});rt("staggerTo,staggerFrom,staggerFromTo",function(a){Y[a]=function(){var t=new Z,e=fr.call(arguments,0);return e.splice(a==="staggerFromTo"?5:4,0,0),t[a].apply(t,e)}});var Rr=function(t,e,r){return t[e]=r},nn=function(t,e,r){return t[e](r)},Is=function(t,e,r,i){return t[e](i.fp,r)},Rs=function(t,e,r){return t.setAttribute(e,r)},Dr=function(t,e){return $(t[e])?nn:Tr(t[e])&&t.setAttribute?Rs:Rr},sn=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Ds=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},an=function(t,e){var r=e._pt,i="";if(!t&&e.b)i=e.b;else if(t===1&&e.e)i=e.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+i,r=r._next;i+=e.c}e.set(e.t,e.p,i,e)},Lr=function(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},Ls=function(t,e,r,i){for(var n=this._pt,s;n;)s=n._next,n.p===i&&n.modifier(t,e,r),n=s},Ns=function(t){for(var e=this._pt,r,i;e;)i=e._next,e.p===t&&!e.op||e.op===t?We(this,e,"_pt"):e.dep||(r=1),e=i;return!r},Fs=function(t,e,r,i){i.mSet(t,e,i.m.call(i.tween,r,i.mt),i)},on=function(t){for(var e=t._pt,r,i,n,s;e;){for(r=e._next,i=n;i&&i.pr>e.pr;)i=i._next;(e._prev=i?i._prev:s)?e._prev._next=e:n=e,(e._next=i)?i._prev=e:s=e,e=r}t._pt=n},it=function(){function a(e,r,i,n,s,o,l,c,u){this.t=r,this.s=n,this.c=s,this.p=i,this.r=o||sn,this.d=l||this,this.set=c||Rr,this.pr=u||0,this._next=e,e&&(e._prev=this)}var t=a.prototype;return t.modifier=function(r,i,n){this.mSet=this.mSet||this.set,this.set=Fs,this.m=r,this.mt=n,this.tween=i},a}();rt(Ar+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(a){return Sr[a]=1});ut.TweenMax=ut.TweenLite=Y;ut.TimelineLite=ut.TimelineMax=Z;q=new Z({sortChildren:!1,defaults:se,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ct.stringFilter=Ki;var Gt=[],Oe={},Bs=[],Qr=0,zs=0,Ze=function(t){return(Oe[t]||Bs).map(function(e){return e()})},gr=function(){var t=Date.now(),e=[];t-Qr>2&&(Ze("matchMediaInit"),Gt.forEach(function(r){var i=r.queries,n=r.conditions,s,o,l,c;for(o in i)s=yt.matchMedia(i[o]).matches,s&&(l=1),s!==n[o]&&(n[o]=s,c=1);c&&(r.revert(),l&&e.push(r))}),Ze("matchMediaRevert"),e.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),Qr=t,Ze("matchMedia"))},ln=function(){function a(e,r){this.selector=r&&dr(r),this.data=[],this._r=[],this.isReverted=!1,this.id=zs++,e&&this.add(e)}var t=a.prototype;return t.add=function(r,i,n){$(r)&&(n=i,i=r,r=$);var s=this,o=function(){var c=U,u=s.selector,h;return c&&c!==s&&c.data.push(s),n&&(s.selector=dr(n)),U=s,h=i.apply(s,arguments),$(h)&&s._r.push(h),U=c,s.selector=u,s.isReverted=!1,h};return s.last=o,r===$?o(s,function(l){return s.add(null,l)}):r?s[r]=o:o},t.ignore=function(r){var i=U;U=null,r(this),U=i},t.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof a?r.push.apply(r,i.getTweens()):i instanceof Y&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,i){var n=this;if(r?function(){for(var o=n.getTweens(),l=n.data.length,c;l--;)c=n.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}));for(o.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(r)}),l=n.data.length;l--;)c=n.data[l],c instanceof Z?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Y)&&c.revert&&c.revert(r);n._r.forEach(function(u){return u(r,n)}),n.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var s=Gt.length;s--;)Gt[s].id===this.id&&Gt.splice(s,1)},t.revert=function(r){this.kill(r||{})},a}(),Us=function(){function a(e){this.contexts=[],this.scope=e,U&&U.data.push(this)}var t=a.prototype;return t.add=function(r,i,n){wt(r)||(r={matches:r});var s=new ln(0,n||this.scope),o=s.conditions={},l,c,u;U&&!s.selector&&(s.selector=U.selector),this.contexts.push(s),i=s.add("onMatch",i),s.queries=r;for(c in r)c==="all"?u=1:(l=yt.matchMedia(r[c]),l&&(Gt.indexOf(s)<0&&Gt.push(s),(o[c]=l.matches)&&(u=1),l.addListener?l.addListener(gr):l.addEventListener("change",gr)));return u&&i(s,function(h){return s.add(null,h)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},a}(),qe={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(i){return Yi(i)})},timeline:function(t){return new Z(t)},getTweensOf:function(t,e){return q.getTweensOf(t,e)},getProperty:function(t,e,r,i){G(t)&&(t=pt(t)[0]);var n=Wt(t||{}).get,s=r?Ri:Ii;return r==="native"&&(r=""),t&&(e?s((at[e]&&at[e].get||n)(t,e,r,i)):function(o,l,c){return s((at[o]&&at[o].get||n)(t,o,l,c))})},quickSetter:function(t,e,r){if(t=pt(t),t.length>1){var i=t.map(function(u){return st.quickSetter(u,e,r)}),n=i.length;return function(u){for(var h=n;h--;)i[h](u)}}t=t[0]||{};var s=at[e],o=Wt(t),l=o.harness&&(o.harness.aliases||{})[e]||e,c=s?function(u){var h=new s;te._pt=0,h.init(t,r?u+r:u,te,0,[t]),h.render(1,h),te._pt&&Lr(1,te)}:o.set(t,l);return s?c:function(u){return c(t,l,r?u+r:u,o,1)}},quickTo:function(t,e,r){var i,n=st.to(t,ht((i={},i[e]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),s=function(l,c,u){return n.resetTo(e,l,c,u)};return s.tween=n,s},isTweening:function(t){return q.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Xt(t.ease,se.ease)),Yr(se,t||{})},config:function(t){return Yr(ct,t||{})},registerEffect:function(t){var e=t.name,r=t.effect,i=t.plugins,n=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!at[o]&&!ut[o]&&ye(e+" effect requires "+o+" plugin.")}),Ke[e]=function(o,l,c){return r(pt(o),ht(l||{},n),c)},s&&(Z.prototype[e]=function(o,l,c){return this.add(Ke[e](o,wt(l)?l:(c=l)&&{},this),c)})},registerEase:function(t,e){O[t]=Xt(e)},parseEase:function(t,e){return arguments.length?Xt(t,e):O},getById:function(t){return q.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var r=new Z(t),i,n;for(r.smoothChildTiming=et(t.smoothChildTiming),q.remove(r),r._dp=0,r._time=r._tTime=q._time,i=q._first;i;)n=i._next,(e||!(!i._dur&&i instanceof Y&&i.vars.onComplete===i._targets[0]))&&bt(r,i,i._start-i._delay),i=n;return bt(q,r,0),r},context:function(t,e){return t?new ln(t,e):U},matchMedia:function(t){return new Us(t)},matchMediaRefresh:function(){return Gt.forEach(function(t){var e=t.conditions,r,i;for(i in e)e[i]&&(e[i]=!1,r=1);r&&t.revert()})||gr()},addEventListener:function(t,e){var r=Oe[t]||(Oe[t]=[]);~r.indexOf(e)||r.push(e)},removeEventListener:function(t,e){var r=Oe[t],i=r&&r.indexOf(e);i>=0&&r.splice(i,1)},utils:{wrap:ys,wrapYoyo:bs,distribute:Ui,random:Hi,snap:qi,normalize:ms,getUnit:Q,clamp:ds,splitColor:Xi,toArray:pt,selector:dr,mapRange:Vi,pipe:ps,unitize:gs,interpolate:vs,shuffle:zi},install:Si,effects:Ke,ticker:ot,updateRoot:Z.updateRoot,plugins:at,globalTimeline:q,core:{PropTween:it,globals:Ai,Tween:Y,Timeline:Z,Animation:xe,getCache:Wt,_removeLinkedListItem:We,reverting:function(){return K},context:function(t){return t&&U&&(U.data.push(t),t._ctx=U),U},suppressOverwrites:function(t){return xr=t}}};rt("to,from,fromTo,delayedCall,set,killTweensOf",function(a){return qe[a]=Y[a]});ot.add(Z.updateRoot);te=qe.to({},{duration:0});var qs=function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r},Hs=function(t,e){var r=t._targets,i,n,s;for(i in e)for(n=r.length;n--;)s=t._ptLookup[n][i],s&&(s=s.d)&&(s._pt&&(s=qs(s,i)),s&&s.modifier&&s.modifier(e[i],t,r[n],i))},tr=function(t,e){return{name:t,headless:1,rawVars:1,init:function(i,n,s){s._onInit=function(o){var l,c;if(G(n)&&(l={},rt(n,function(u){return l[u]=1}),n=l),e){l={};for(c in n)l[c]=e(n[c]);n=l}Hs(o,n)}}}},st=qe.registerPlugin({name:"attr",init:function(t,e,r,i,n){var s,o,l;this.tween=r;for(s in e)l=t.getAttribute(s)||"",o=this.add(t,"setAttribute",(l||0)+"",e[s],i,n,0,0,s),o.op=s,o.b=l,this._props.push(s)},render:function(t,e){for(var r=e._pt;r;)K?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r],0,0,0,0,0,1)}},tr("roundProps",_r),tr("modifiers"),tr("snap",qi))||qe;Y.version=Z.version=st.version="3.13.0";Pi=1;Cr()&&ce();O.Power0;O.Power1;O.Power2;O.Power3;O.Power4;O.Linear;O.Quad;O.Cubic;O.Quart;O.Quint;O.Strong;O.Elastic;O.Back;O.SteppedEase;O.Bounce;O.Sine;O.Expo;O.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Jr,It,re,Nr,Vt,Zr,Fr,$s=function(){return typeof window<"u"},At={},$t=180/Math.PI,ie=Math.PI/180,Qt=Math.atan2,ti=1e8,Br=/([A-Z])/g,Vs=/(left|right|width|margin|padding|x)/i,Ws=/[\s,\(]\S/,vt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},mr=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Ys=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Xs=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Gs=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},cn=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},un=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Ks=function(t,e,r){return t.style[e]=r},js=function(t,e,r){return t.style.setProperty(e,r)},Qs=function(t,e,r){return t._gsap[e]=r},Js=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},Zs=function(t,e,r,i,n){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(n,s)},ta=function(t,e,r,i,n){var s=t._gsap;s[e]=r,s.renderTransform(n,s)},H="transform",nt=H+"Origin",ea=function a(t,e){var r=this,i=this.target,n=i.style,s=i._gsap;if(t in At&&n){if(this.tfm=this.tfm||{},t!=="transform")t=vt[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return r.tfm[o]=Ct(i,o)}):this.tfm[t]=s.x?s[t]:Ct(i,t),t===nt&&(this.tfm.zOrigin=s.zOrigin);else return vt.transform.split(",").forEach(function(o){return a.call(r,o,e)});if(this.props.indexOf(H)>=0)return;s.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(nt,e,"")),t=H}(n||e)&&this.props.push(t,e,n[t])},hn=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},ra=function(){var t=this.props,e=this.target,r=e.style,i=e._gsap,n,s;for(n=0;n<t.length;n+=3)t[n+1]?t[n+1]===2?e[t[n]](t[n+2]):e[t[n]]=t[n+2]:t[n+2]?r[t[n]]=t[n+2]:r.removeProperty(t[n].substr(0,2)==="--"?t[n]:t[n].replace(Br,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)i[s]=this.tfm[s];i.svg&&(i.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),n=Fr(),(!n||!n.isStart)&&!r[H]&&(hn(r),i.zOrigin&&r[nt]&&(r[nt]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},fn=function(t,e){var r={target:t,props:[],revert:ra,save:ea};return t._gsap||st.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(i){return r.save(i)}),r},dn,yr=function(t,e){var r=It.createElementNS?It.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):It.createElement(t);return r&&r.style?r:It.createElement(t)},gt=function a(t,e,r){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(Br,"-$1").toLowerCase())||i.getPropertyValue(e)||!r&&a(t,ue(e)||e,1)||""},ei="O,Moz,ms,Ms,Webkit".split(","),ue=function(t,e,r){var i=e||Vt,n=i.style,s=5;if(t in n&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(ei[s]+t in n););return s<0?null:(s===3?"ms":s>=0?ei[s]:"")+t},br=function(){$s()&&window.document&&(Jr=window,It=Jr.document,re=It.documentElement,Vt=yr("div")||{style:{}},yr("div"),H=ue(H),nt=H+"Origin",Vt.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",dn=!!ue("perspective"),Fr=st.core.reverting,Nr=1)},ri=function(t){var e=t.ownerSVGElement,r=yr("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0),n;i.style.display="block",r.appendChild(i),re.appendChild(r);try{n=i.getBBox()}catch{}return r.removeChild(i),re.removeChild(r),n},ii=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},_n=function(t){var e,r;try{e=t.getBBox()}catch{e=ri(t),r=1}return e&&(e.width||e.height)||r||(e=ri(t)),e&&!e.width&&!e.x&&!e.y?{x:+ii(t,["x","cx","x1"])||0,y:+ii(t,["y","cy","y1"])||0,width:0,height:0}:e},pn=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&_n(t))},Kt=function(t,e){if(e){var r=t.style,i;e in At&&e!==nt&&(e=H),r.removeProperty?(i=e.substr(0,2),(i==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),r.removeProperty(i==="--"?e:e.replace(Br,"-$1").toLowerCase())):r.removeAttribute(e)}},Rt=function(t,e,r,i,n,s){var o=new it(t._pt,e,r,0,1,s?un:cn);return t._pt=o,o.b=i,o.e=n,t._props.push(r),o},ni={deg:1,rad:1,turn:1},ia={grid:1,flex:1},Ft=function a(t,e,r,i){var n=parseFloat(r)||0,s=(r+"").trim().substr((n+"").length)||"px",o=Vt.style,l=Vs.test(e),c=t.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=i==="px",_=i==="%",p,f,g,y;if(i===s||!n||ni[i]||ni[s])return n;if(s!=="px"&&!d&&(n=a(t,e,r,"px")),y=t.getCTM&&pn(t),(_||s==="%")&&(At[e]||~e.indexOf("adius")))return p=y?t.getBBox()[l?"width":"height"]:t[u],W(_?n/p*h:n/100*p);if(o[l?"width":"height"]=h+(d?s:i),f=i!=="rem"&&~e.indexOf("adius")||i==="em"&&t.appendChild&&!c?t:t.parentNode,y&&(f=(t.ownerSVGElement||{}).parentNode),(!f||f===It||!f.appendChild)&&(f=It.body),g=f._gsap,g&&_&&g.width&&l&&g.time===ot.time&&!g.uncache)return W(n/g.width*h);if(_&&(e==="height"||e==="width")){var v=t.style[e];t.style[e]=h+i,p=t[u],v?t.style[e]=v:Kt(t,e)}else(_||s==="%")&&!ia[gt(f,"display")]&&(o.position=gt(t,"position")),f===t&&(o.position="static"),f.appendChild(Vt),p=Vt[u],f.removeChild(Vt),o.position="absolute";return l&&_&&(g=Wt(f),g.time=ot.time,g.width=f[u]),W(d?p*n/h:p&&n?h/p*n:0)},Ct=function(t,e,r,i){var n;return Nr||br(),e in vt&&e!=="transform"&&(e=vt[e],~e.indexOf(",")&&(e=e.split(",")[0])),At[e]&&e!=="transform"?(n=Ce(t,i),n=e!=="transformOrigin"?n[e]:n.svg?n.origin:$e(gt(t,nt))+" "+n.zOrigin+"px"):(n=t.style[e],(!n||n==="auto"||i||~(n+"").indexOf("calc("))&&(n=He[e]&&He[e](t,e,r)||gt(t,e)||Oi(t,e)||(e==="opacity"?1:0))),r&&!~(n+"").trim().indexOf(" ")?Ft(t,e,n,r)+r:n},na=function(t,e,r,i){if(!r||r==="none"){var n=ue(e,t,1),s=n&&gt(t,n,1);s&&s!==r?(e=n,r=s):e==="borderColor"&&(r=gt(t,"borderTopColor"))}var o=new it(this._pt,t.style,e,0,1,an),l=0,c=0,u,h,d,_,p,f,g,y,v,C,P,m;if(o.b=r,o.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=gt(t,i.substring(4,i.indexOf(")")))),i==="auto"&&(f=t.style[e],t.style[e]=i,i=gt(t,e)||i,f?t.style[e]=f:Kt(t,e)),u=[r,i],Ki(u),r=u[0],i=u[1],d=r.match(Zt)||[],m=i.match(Zt)||[],m.length){for(;h=Zt.exec(i);)g=h[0],v=i.substring(l,h.index),p?p=(p+1)%5:(v.substr(-5)==="rgba("||v.substr(-5)==="hsla(")&&(p=1),g!==(f=d[c++]||"")&&(_=parseFloat(f)||0,P=f.substr((_+"").length),g.charAt(1)==="="&&(g=ee(_,g)+P),y=parseFloat(g),C=g.substr((y+"").length),l=Zt.lastIndex-C.length,C||(C=C||ct.units[e]||P,l===i.length&&(i+=C,o.e+=C)),P!==C&&(_=Ft(t,e,f,C)||0),o._pt={_next:o._pt,p:v||c===1?v:",",s:_,c:y-_,m:p&&p<4||e==="zIndex"?Math.round:0});o.c=l<i.length?i.substring(l,i.length):""}else o.r=e==="display"&&i==="none"?un:cn;return Ci.test(i)&&(o.e=0),this._pt=o,o},si={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},sa=function(t){var e=t.split(" "),r=e[0],i=e[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(t=r,r=i,i=t),e[0]=si[r]||r,e[1]=si[i]||i,e.join(" ")},aa=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r=e.t,i=r.style,n=e.u,s=r._gsap,o,l,c;if(n==="all"||n===!0)i.cssText="",l=1;else for(n=n.split(","),c=n.length;--c>-1;)o=n[c],At[o]&&(l=1,o=o==="transformOrigin"?nt:H),Kt(r,o);l&&(Kt(r,H),s&&(s.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Ce(r,1),s.uncache=1,hn(i)))}},He={clearProps:function(t,e,r,i,n){if(n.data!=="isFromStart"){var s=t._pt=new it(t._pt,e,r,0,0,aa);return s.u=i,s.pr=-10,s.tween=n,t._props.push(r),1}}},Te=[1,0,0,1,0,0],gn={},mn=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ai=function(t){var e=gt(t,H);return mn(e)?Te:e.substr(7).match(Ti).map(W)},zr=function(t,e){var r=t._gsap||Wt(t),i=t.style,n=ai(t),s,o,l,c;return r.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,n=[l.a,l.b,l.c,l.d,l.e,l.f],n.join(",")==="1,0,0,1,0,0"?Te:n):(n===Te&&!t.offsetParent&&t!==re&&!r.svg&&(l=i.display,i.display="block",s=t.parentNode,(!s||!t.offsetParent&&!t.getBoundingClientRect().width)&&(c=1,o=t.nextElementSibling,re.appendChild(t)),n=ai(t),l?i.display=l:Kt(t,"display"),c&&(o?s.insertBefore(t,o):s?s.appendChild(t):re.removeChild(t))),e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n)},vr=function(t,e,r,i,n,s){var o=t._gsap,l=n||zr(t,!0),c=o.xOrigin||0,u=o.yOrigin||0,h=o.xOffset||0,d=o.yOffset||0,_=l[0],p=l[1],f=l[2],g=l[3],y=l[4],v=l[5],C=e.split(" "),P=parseFloat(C[0])||0,m=parseFloat(C[1])||0,x,T,k,w;r?l!==Te&&(T=_*g-p*f)&&(k=P*(g/T)+m*(-f/T)+(f*v-g*y)/T,w=P*(-p/T)+m*(_/T)-(_*v-p*y)/T,P=k,m=w):(x=_n(t),P=x.x+(~C[0].indexOf("%")?P/100*x.width:P),m=x.y+(~(C[1]||C[0]).indexOf("%")?m/100*x.height:m)),i||i!==!1&&o.smooth?(y=P-c,v=m-u,o.xOffset=h+(y*_+v*f)-y,o.yOffset=d+(y*p+v*g)-v):o.xOffset=o.yOffset=0,o.xOrigin=P,o.yOrigin=m,o.smooth=!!i,o.origin=e,o.originIsAbsolute=!!r,t.style[nt]="0px 0px",s&&(Rt(s,o,"xOrigin",c,P),Rt(s,o,"yOrigin",u,m),Rt(s,o,"xOffset",h,o.xOffset),Rt(s,o,"yOffset",d,o.yOffset)),t.setAttribute("data-svg-origin",P+" "+m)},Ce=function(t,e){var r=t._gsap||new Zi(t);if("x"in r&&!e&&!r.uncache)return r;var i=t.style,n=r.scaleX<0,s="px",o="deg",l=getComputedStyle(t),c=gt(t,nt)||"0",u,h,d,_,p,f,g,y,v,C,P,m,x,T,k,w,E,D,M,A,L,N,F,B,tt,zt,Et,Ot,xt,Pe,mt,Ut;return u=h=d=f=g=y=v=C=P=0,_=p=1,r.svg=!!(t.getCTM&&pn(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[H]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[H]!=="none"?l[H]:"")),i.scale=i.rotate=i.translate="none"),T=zr(t,r.svg),r.svg&&(r.uncache?(tt=t.getBBox(),c=r.xOrigin-tt.x+"px "+(r.yOrigin-tt.y)+"px",B=""):B=!e&&t.getAttribute("data-svg-origin"),vr(t,B||c,!!B||r.originIsAbsolute,r.smooth!==!1,T)),m=r.xOrigin||0,x=r.yOrigin||0,T!==Te&&(D=T[0],M=T[1],A=T[2],L=T[3],u=N=T[4],h=F=T[5],T.length===6?(_=Math.sqrt(D*D+M*M),p=Math.sqrt(L*L+A*A),f=D||M?Qt(M,D)*$t:0,v=A||L?Qt(A,L)*$t+f:0,v&&(p*=Math.abs(Math.cos(v*ie))),r.svg&&(u-=m-(m*D+x*A),h-=x-(m*M+x*L))):(Ut=T[6],Pe=T[7],Et=T[8],Ot=T[9],xt=T[10],mt=T[11],u=T[12],h=T[13],d=T[14],k=Qt(Ut,xt),g=k*$t,k&&(w=Math.cos(-k),E=Math.sin(-k),B=N*w+Et*E,tt=F*w+Ot*E,zt=Ut*w+xt*E,Et=N*-E+Et*w,Ot=F*-E+Ot*w,xt=Ut*-E+xt*w,mt=Pe*-E+mt*w,N=B,F=tt,Ut=zt),k=Qt(-A,xt),y=k*$t,k&&(w=Math.cos(-k),E=Math.sin(-k),B=D*w-Et*E,tt=M*w-Ot*E,zt=A*w-xt*E,mt=L*E+mt*w,D=B,M=tt,A=zt),k=Qt(M,D),f=k*$t,k&&(w=Math.cos(k),E=Math.sin(k),B=D*w+M*E,tt=N*w+F*E,M=M*w-D*E,F=F*w-N*E,D=B,N=tt),g&&Math.abs(g)+Math.abs(f)>359.9&&(g=f=0,y=180-y),_=W(Math.sqrt(D*D+M*M+A*A)),p=W(Math.sqrt(F*F+Ut*Ut)),k=Qt(N,F),v=Math.abs(k)>2e-4?k*$t:0,P=mt?1/(mt<0?-mt:mt):0),r.svg&&(B=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!mn(gt(t,H)),B&&t.setAttribute("transform",B))),Math.abs(v)>90&&Math.abs(v)<270&&(n?(_*=-1,v+=f<=0?180:-180,f+=f<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),e=e||r.uncache,r.x=u-((r.xPercent=u&&(!e&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+s,r.y=h-((r.yPercent=h&&(!e&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-h)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+s,r.z=d+s,r.scaleX=W(_),r.scaleY=W(p),r.rotation=W(f)+o,r.rotationX=W(g)+o,r.rotationY=W(y)+o,r.skewX=v+o,r.skewY=C+o,r.transformPerspective=P+s,(r.zOrigin=parseFloat(c.split(" ")[2])||!e&&r.zOrigin||0)&&(i[nt]=$e(c)),r.xOffset=r.yOffset=0,r.force3D=ct.force3D,r.renderTransform=r.svg?la:dn?yn:oa,r.uncache=0,r},$e=function(t){return(t=t.split(" "))[0]+" "+t[1]},er=function(t,e,r){var i=Q(e);return W(parseFloat(e)+parseFloat(Ft(t,"x",r+"px",i)))+i},oa=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,yn(t,e)},qt="0deg",he="0px",Ht=") ",yn=function(t,e){var r=e||this,i=r.xPercent,n=r.yPercent,s=r.x,o=r.y,l=r.z,c=r.rotation,u=r.rotationY,h=r.rotationX,d=r.skewX,_=r.skewY,p=r.scaleX,f=r.scaleY,g=r.transformPerspective,y=r.force3D,v=r.target,C=r.zOrigin,P="",m=y==="auto"&&t&&t!==1||y===!0;if(C&&(h!==qt||u!==qt)){var x=parseFloat(u)*ie,T=Math.sin(x),k=Math.cos(x),w;x=parseFloat(h)*ie,w=Math.cos(x),s=er(v,s,T*w*-C),o=er(v,o,-Math.sin(x)*-C),l=er(v,l,k*w*-C+C)}g!==he&&(P+="perspective("+g+Ht),(i||n)&&(P+="translate("+i+"%, "+n+"%) "),(m||s!==he||o!==he||l!==he)&&(P+=l!==he||m?"translate3d("+s+", "+o+", "+l+") ":"translate("+s+", "+o+Ht),c!==qt&&(P+="rotate("+c+Ht),u!==qt&&(P+="rotateY("+u+Ht),h!==qt&&(P+="rotateX("+h+Ht),(d!==qt||_!==qt)&&(P+="skew("+d+", "+_+Ht),(p!==1||f!==1)&&(P+="scale("+p+", "+f+Ht),v.style[H]=P||"translate(0, 0)"},la=function(t,e){var r=e||this,i=r.xPercent,n=r.yPercent,s=r.x,o=r.y,l=r.rotation,c=r.skewX,u=r.skewY,h=r.scaleX,d=r.scaleY,_=r.target,p=r.xOrigin,f=r.yOrigin,g=r.xOffset,y=r.yOffset,v=r.forceCSS,C=parseFloat(s),P=parseFloat(o),m,x,T,k,w;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=ie,c*=ie,m=Math.cos(l)*h,x=Math.sin(l)*h,T=Math.sin(l-c)*-d,k=Math.cos(l-c)*d,c&&(u*=ie,w=Math.tan(c-u),w=Math.sqrt(1+w*w),T*=w,k*=w,u&&(w=Math.tan(u),w=Math.sqrt(1+w*w),m*=w,x*=w)),m=W(m),x=W(x),T=W(T),k=W(k)):(m=h,k=d,x=T=0),(C&&!~(s+"").indexOf("px")||P&&!~(o+"").indexOf("px"))&&(C=Ft(_,"x",s,"px"),P=Ft(_,"y",o,"px")),(p||f||g||y)&&(C=W(C+p-(p*m+f*T)+g),P=W(P+f-(p*x+f*k)+y)),(i||n)&&(w=_.getBBox(),C=W(C+i/100*w.width),P=W(P+n/100*w.height)),w="matrix("+m+","+x+","+T+","+k+","+C+","+P+")",_.setAttribute("transform",w),v&&(_.style[H]=w)},ca=function(t,e,r,i,n){var s=360,o=G(n),l=parseFloat(n)*(o&&~n.indexOf("rad")?$t:1),c=l-i,u=i+c+"deg",h,d;return o&&(h=n.split("_")[1],h==="short"&&(c%=s,c!==c%(s/2)&&(c+=c<0?s:-s)),h==="cw"&&c<0?c=(c+s*ti)%s-~~(c/s)*s:h==="ccw"&&c>0&&(c=(c-s*ti)%s-~~(c/s)*s)),t._pt=d=new it(t._pt,e,r,i,c,Ys),d.e=u,d.u="deg",t._props.push(r),d},oi=function(t,e){for(var r in e)t[r]=e[r];return t},ua=function(t,e,r){var i=oi({},r._gsap),n="perspective,force3D,transformOrigin,svgOrigin",s=r.style,o,l,c,u,h,d,_,p;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),s[H]=e,o=Ce(r,1),Kt(r,H),r.setAttribute("transform",c)):(c=getComputedStyle(r)[H],s[H]=e,o=Ce(r,1),s[H]=c);for(l in At)c=i[l],u=o[l],c!==u&&n.indexOf(l)<0&&(_=Q(c),p=Q(u),h=_!==p?Ft(r,l,c,p):parseFloat(c),d=parseFloat(u),t._pt=new it(t._pt,o,l,h,d-h,mr),t._pt.u=p||0,t._props.push(l));oi(o,i)};rt("padding,margin,Width,Radius",function(a,t){var e="Top",r="Right",i="Bottom",n="Left",s=(t<3?[e,r,i,n]:[e+n,e+r,i+r,i+n]).map(function(o){return t<2?a+o:"border"+o+a});He[t>1?"border"+a:a]=function(o,l,c,u,h){var d,_;if(arguments.length<4)return d=s.map(function(p){return Ct(o,p,c)}),_=d.join(" "),_.split(d[0]).length===5?d[0]:_;d=(u+"").split(" "),_={},s.forEach(function(p,f){return _[p]=d[f]=d[f]||d[(f-1)/2|0]}),o.init(l,_,h)}});var bn={name:"css",register:br,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,i,n){var s=this._props,o=t.style,l=r.vars.startAt,c,u,h,d,_,p,f,g,y,v,C,P,m,x,T,k;Nr||br(),this.styles=this.styles||fn(t),k=this.styles.props,this.tween=r;for(f in e)if(f!=="autoRound"&&(u=e[f],!(at[f]&&tn(f,e,r,i,t,n)))){if(_=typeof u,p=He[f],_==="function"&&(u=u.call(r,i,t,n),_=typeof u),_==="string"&&~u.indexOf("random(")&&(u=ve(u)),p)p(this,t,f,u,r)&&(T=1);else if(f.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(f)+"").trim(),u+="",Lt.lastIndex=0,Lt.test(c)||(g=Q(c),y=Q(u)),y?g!==y&&(c=Ft(t,f,c,y)+y):g&&(u+=g),this.add(o,"setProperty",c,u,i,n,0,0,f),s.push(f),k.push(f,0,o[f]);else if(_!=="undefined"){if(l&&f in l?(c=typeof l[f]=="function"?l[f].call(r,i,t,n):l[f],G(c)&&~c.indexOf("random(")&&(c=ve(c)),Q(c+"")||c==="auto"||(c+=ct.units[f]||Q(Ct(t,f))||""),(c+"").charAt(1)==="="&&(c=Ct(t,f))):c=Ct(t,f),d=parseFloat(c),v=_==="string"&&u.charAt(1)==="="&&u.substr(0,2),v&&(u=u.substr(2)),h=parseFloat(u),f in vt&&(f==="autoAlpha"&&(d===1&&Ct(t,"visibility")==="hidden"&&h&&(d=0),k.push("visibility",0,o.visibility),Rt(this,o,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),f!=="scale"&&f!=="transform"&&(f=vt[f],~f.indexOf(",")&&(f=f.split(",")[0]))),C=f in At,C){if(this.styles.save(f),_==="string"&&u.substring(0,6)==="var(--"&&(u=gt(t,u.substring(4,u.indexOf(")"))),h=parseFloat(u)),P||(m=t._gsap,m.renderTransform&&!e.parseTransform||Ce(t,e.parseTransform),x=e.smoothOrigin!==!1&&m.smooth,P=this._pt=new it(this._pt,o,H,0,1,m.renderTransform,m,0,-1),P.dep=1),f==="scale")this._pt=new it(this._pt,m,"scaleY",m.scaleY,(v?ee(m.scaleY,v+h):h)-m.scaleY||0,mr),this._pt.u=0,s.push("scaleY",f),f+="X";else if(f==="transformOrigin"){k.push(nt,0,o[nt]),u=sa(u),m.svg?vr(t,u,0,x,0,this):(y=parseFloat(u.split(" ")[2])||0,y!==m.zOrigin&&Rt(this,m,"zOrigin",m.zOrigin,y),Rt(this,o,f,$e(c),$e(u)));continue}else if(f==="svgOrigin"){vr(t,u,1,x,0,this);continue}else if(f in gn){ca(this,m,f,d,v?ee(d,v+u):u);continue}else if(f==="smoothOrigin"){Rt(this,m,"smooth",m.smooth,u);continue}else if(f==="force3D"){m[f]=u;continue}else if(f==="transform"){ua(this,u,t);continue}}else f in o||(f=ue(f)||f);if(C||(h||h===0)&&(d||d===0)&&!Ws.test(u)&&f in o)g=(c+"").substr((d+"").length),h||(h=0),y=Q(u)||(f in ct.units?ct.units[f]:g),g!==y&&(d=Ft(t,f,c,y)),this._pt=new it(this._pt,C?m:o,f,d,(v?ee(d,v+h):h)-d,!C&&(y==="px"||f==="zIndex")&&e.autoRound!==!1?Gs:mr),this._pt.u=y||0,g!==y&&y!=="%"&&(this._pt.b=c,this._pt.r=Xs);else if(f in o)na.call(this,t,f,c,v?v+u:u);else if(f in t)this.add(t,f,c||t[f],v?v+u:u,i,n);else if(f!=="parseTransform"){Pr(f,u);continue}C||(f in o?k.push(f,0,o[f]):typeof t[f]=="function"?k.push(f,2,t[f]()):k.push(f,1,c||t[f])),s.push(f)}}T&&on(this)},render:function(t,e){if(e.tween._time||!Fr())for(var r=e._pt;r;)r.r(t,r.d),r=r._next;else e.styles.revert()},get:Ct,aliases:vt,getSetter:function(t,e,r){var i=vt[e];return i&&i.indexOf(",")<0&&(e=i),e in At&&e!==nt&&(t._gsap.x||Ct(t,"x"))?r&&Zr===r?e==="scale"?Js:Qs:(Zr=r||{})&&(e==="scale"?Zs:ta):t.style&&!Tr(t.style[e])?Ks:~e.indexOf("-")?js:Dr(t,e)},core:{_removeProperty:Kt,_getMatrix:zr}};st.utils.checkPrefix=ue;st.core.getStyleSaver=fn;(function(a,t,e,r){var i=rt(a+","+t+","+e,function(n){At[n]=1});rt(t,function(n){ct.units[n]="deg",gn[n]=1}),vt[i[13]]=a+","+t,rt(r,function(n){var s=n.split(":");vt[s[1]]=i[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");rt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(a){ct.units[a]="px"});st.registerPlugin(bn);var Pt=st.registerPlugin(bn)||st;Pt.core.Tween;function ha(a){return new Promise((t,e)=>{window.speechSynthesis.cancel();const r=document.createElement("div");r.innerHTML=a;const i=r.textContent||r.innerText||"",n=new SpeechSynthesisUtterance(i);n.onend=t,n.onerror=e,setTimeout(()=>window.speechSynthesis.speak(n),50)})}function fa(a){const t=document.querySelector(a);if(!t)return;const e=t.getBoundingClientRect(),r=10,i=(e.top-r)/window.innerHeight*100,n=(e.left-r)/window.innerWidth*100,s=(e.right+r)/window.innerWidth*100,o=(e.bottom+r)/window.innerHeight*100,l=`polygon(0% 0%, 0% 100%, ${n}% 100%, ${n}% ${i}%, ${s}% ${i}%, ${s}% ${o}%, ${n}% ${o}%, ${n}% 100%, 100% 100%, 100% 0%, 0% 0%)`;Pt.to("#tutorial-mask",{clipPath:l,duration:.4,ease:"power2.inOut"})}function da(){Pt.to("#tutorial-mask",{clipPath:"polygon(0% 0%, 0% 100%, 50% 100%, 50% 50%, 50% 50%, 50% 50%, 50% 50%, 50% 100%, 100% 100%, 100% 0%, 0% 0%)",duration:.4,ease:"power2.inOut"})}function _a(a){const t=document.querySelector(a);t&&Pt.to(t,{position:"relative",zIndex:2001,boxShadow:"0 0 20px 8px #33c6dc",duration:.4})}function pa(a){const t=document.querySelector(a);t&&Pt.to(t,{boxShadow:"0 0 0px 0px rgba(51,198,220,0)",duration:.3,onComplete:()=>Pt.set(t,{clearProps:"all"})})}function rr(a){return new Promise(t=>{const e=b.rings[a];let r=!1;const i=()=>{if(!r)b.rings[a]!==e&&(r=!0);else if(!b.drag.active&&!b.animation){cancelAnimationFrame(n),t();return}n=requestAnimationFrame(i)};let n=requestAnimationFrame(i)})}function ga(){ft.toggleSidebar(!1),window.diatonicCompassTutorial&&window.diatonicCompassTutorial.kill();const a=Pt.timeline({onComplete:()=>window.diatonicCompassTutorial=null});window.diatonicCompassTutorial=a;const t=e=>{a.call(async()=>{a.pause(),Pt.set("#tutorial-text",{autoAlpha:0,innerHTML:e.text}),Pt.to("#tutorial-text",{autoAlpha:1,duration:.4}),e.highlightTarget&&(fa(e.highlightTarget),_a(e.highlightTarget)),await ha(e.text),e.waitFor&&await e.waitFor(),e.highlightTarget&&(pa(e.highlightTarget),da()),await new Promise(r=>setTimeout(r,500)),a.resume()})};a.to("#tutorial-mask",{autoAlpha:1,duration:.3}),a.set("#tutorial-bubble",{autoAlpha:1}),t({text:"Welcome to the <strong>Diatonic Compass!</strong>"}),t({text:"Rotate the <strong>Pitch</strong> belt so we leave <strong>C Major.</strong>",highlightTarget:".pitch-belt",waitFor:()=>rr("pitchClass")}),t({text:"Nice! <br>Change the <strong>mode</strong> by spinning the <strong>Degree belt.</strong>",highlightTarget:".degree-belt",waitFor:()=>rr("degree")}),t({text:"Wonderful!<br>Now shift the perspective by spinning the <strong>Chromatic belt</strong>.",highlightTarget:".chromatic-belt",waitFor:()=>rr("chromatic")}),a.to("#tutorial-bubble",{bottom:"110px",duration:.3,ease:"power2.out"}),t({text:"Almost there!<br> Tap the <strong>result bar</strong> to <strong>hear your scale.</strong>",highlightTarget:"#result-container",waitFor:async()=>{await new Promise(e=>{const r=()=>b.playback.isPlaying?e():requestAnimationFrame(r);r()}),await new Promise(e=>{const r=()=>b.playback.isPlaying?requestAnimationFrame(r):e();r()})}}),a.to("#tutorial-bubble",{bottom:"20px",duration:.3,ease:"power2.in"}),t({text:"You did it!<br><strong>Enjoy exploring.</strong>"}),a.to(["#tutorial-mask","#tutorial-bubble"],{autoAlpha:0,duration:.4,delay:1})}function ne(a,t){if(b.rings.hasOwnProperty(a)){const e=z(t);b.rings[a]=e}}function vn(a,t,e){const r=t;b.rings.chromatic=z(a.startChrom+r),b.rings.pitchClass=z(a.startPitchClass+t),b.rings.degree=z(a.startDegree+t),b.rings.highlightPosition=z(a.startHighlight+t)}function wn(a){if(!a)return"#000000";const t=parseInt(a.slice(1,3),16),e=parseInt(a.slice(3,5),16),r=parseInt(a.slice(5,7),16);return .299*t+.587*e+.114*r>140?"#000000":"#FFFFFF"}class ma{constructor(t,e,r){this.canvas=t,this.ctx=t.getContext("2d"),this.state=e,this.onInteractionEnd=r,this._initInteraction()}update(t,e,r){const{size:i,dpr:n}=this.state.dimensions;this._draw(i,n,t,e,r)}_initInteraction(){const t=r=>{const i=this.canvas.getBoundingClientRect(),{cx:n,cy:s,size:o}=this.state.dimensions,l=r.clientX-i.left-n,c=r.clientY-i.top-s,u=Math.hypot(l,c),h=o*.5,d=o*.35,_=o*.2;let p=null;return u>_&&u<d?p="degree":u>d&&u<h?p="pitchClass":u<=_&&(p="chromatic"),{x:l,y:c,ring:p}},e=()=>{if(!this.state.drag.active)return;const r=this.state.drag.active;this.state.drag.active=null,this.canvas.style.cursor="grab",r==="chromatic"?_i(this.onInteractionEnd):r==="pitchClass"?fi("pitchClass",this.onInteractionEnd):r==="degree"&&di(this.onInteractionEnd)};this.canvas.addEventListener("pointerdown",r=>{const{x:i,y:n,ring:s}=t(r);if(!s)return;const{drag:o,rings:l}=this.state;o.active=s,o.startX=i,o.startY=n,o.startPitchClass=l.pitchClass,o.startDegree=l.degree,o.startChrom=l.chromatic,o.startHighlight=l.highlightPosition,this.canvas.setPointerCapture(r.pointerId),this.canvas.style.cursor="grabbing"}),this.canvas.addEventListener("pointermove",r=>{if(this.state.drag.active){const{x:i,y:n}=t(r),s=this.state.drag,o=Math.atan2(s.startY,s.startX),c=Math.atan2(n,i)-o;s.active==="pitchClass"?ne("pitchClass",s.startPitchClass+c):s.active==="degree"?(ne("degree",s.startDegree+c),ne("highlightPosition",s.startHighlight+c)):s.active==="chromatic"&&vn({startPitchClass:s.startPitchClass,startDegree:s.startDegree,startChrom:s.startChrom,startHighlight:s.startHighlight},c)}else{const{ring:i}=t(r);this.canvas.style.cursor=i?"grab":"default"}}),this.canvas.addEventListener("pointerup",e),this.canvas.addEventListener("pointercancel",e),this.canvas.addEventListener("pointerleave",()=>{this.state.drag.active||(this.canvas.style.cursor="default")})}_draw(t,e,r,i,n){const s=this.ctx;s.save(),s.scale(e,e),s.clearRect(0,0,t,t);const o=t/2,l=t/2,{pitchClass:c,degree:u,chromatic:h}=r,{chromaticLabels:d,diatonicLabels:_}=i,p=(m,x,T)=>{const k=T-V/2,w=T+V/2;s.beginPath(),s.arc(o,l,x,k,w),s.arc(o,l,m,w,k,!0),s.closePath()},f=()=>{const m=t*.5,x=t*.35;Object.keys(fe).forEach((k,w)=>{const E=w*V+c-Math.PI/2;p(x,m,E),s.fillStyle=fe[k]?"#fff":"#000",s.fill(),s.lineWidth=t*.002,s.strokeStyle="#000",s.stroke()})},g=()=>{const m=t*.35,x=t*.2;for(let T=0;T<12;T++){const k=T*V+u-Math.PI/2;p(x,m,k),s.fillStyle=ir[T]||"#e0e0e0",s.fill(),s.lineWidth=t*.002,s.strokeStyle="#000",s.stroke()}},y=()=>{s.beginPath(),s.arc(o,l,t*.2,0,Math.PI*2),s.fillStyle="#000",s.fill()},v=()=>{const m=t*.5*.85,x=t*.35*.8,T=t*.2*.8,k=Object.keys(fe),w=(A,L,N,F,B)=>{s.fillStyle=F,s.font=`${B}px 'Atkinson Hyperlegible Next'`,s.textAlign="center",s.textBaseline="middle";const tt=o+Math.cos(A)*L,zt=l+Math.sin(A)*L;if(String(N).includes("<br>")){const Et=N.split("<br>"),Ot=B*1.1,xt=zt-Ot*(Et.length-1)/2;Et.forEach((Pe,mt)=>{s.fillText(Pe,tt,xt+mt*Ot)})}else s.fillText(N,tt,zt)},E=t*On;d.forEach((A,L)=>{const N=k[L],F=A,B=fe[N]?"#000":"#fff";w(L*V+c-Math.PI/2,m,F,B,E)});const D=t*Mn;_.forEach((A,L)=>{const N=ir[L],F=wn(N),B=A;w(L*V+u-Math.PI/2,x,B,F,D)});const M=t*In;Pn.forEach(A=>w(A*V+h-Math.PI/2,T,A.toString(),"#fff",M))},C=()=>{if(!n||!n.isPlaying||n.currentNoteIndex===null)return;const x=n.currentNoteIndex%12*V+c-Math.PI/2,T=t*.5,k=t*.2;p(k,T,x),s.fillStyle="rgba(255, 255, 0, 0.6)",s.fill()},P=()=>{const m=t*.5,x=t*.125,T=-Math.PI/2+h,k=T-V/2,w=T+V/2;s.beginPath(),s.moveTo(o+Math.cos(k)*x,l+Math.sin(k)*x),s.arc(o,l,m,k,w),s.lineTo(o+Math.cos(w)*x,l+Math.sin(w)*x),s.arc(o,l,x,w,k,!0),s.closePath(),s.lineWidth=t*.006,s.strokeStyle="red",s.stroke()};f(),g(),y(),v(),C(),P(),s.restore()}}class ya{constructor(t,e,r){this.container=t,this.state=e,this.onInteractionEnd=r,this.elements={pitchBelt:t.querySelector("#pitchBelt"),degreeBelt:t.querySelector("#degreeBelt"),chromaticBelt:t.querySelector("#chromaticBelt"),chromaticColorsTrack:t.querySelector("#chromatic-colors-track"),chromaticNumbersTrack:t.querySelector("#chromatic-numbers-track"),intervalBracketsTrackContainer:t.querySelector("#intervalBracketsContainer"),intervalBracketsWrapper:t.querySelector(".interval-brackets-wrapper"),cursor:t.querySelector("#belt-cursor"),flashOverlay:t.querySelector("#belt-flash-overlay")},this.state.belts.tracks={},this._initInteraction()}update(t,e){const{orientation:r}=this.state.belts,{diatonicLabels:i,chromaticLabels:n}=t;if(!this.state.belts.init){this._setupAllBelts(i,n),requestAnimationFrame(()=>{this._calculateAllItemSizes(r)&&(this.state.belts.init=!0)});return}const{pitchClass:s,degree:o,chromatic:l,highlightPosition:c}=this.state.rings,{tracks:u,itemSize:h}=this.state.belts;this._applyBeltStyles(e,i,n);let d=r==="vertical"?-s:s,_=r==="vertical"?-o:o,p=r==="vertical"?-l:l,f=r==="vertical"?-c:c;this._updateTrackPosition(u.pitchBelt,d,h.pitchBelt,r),this._updateTrackPosition(u.degreeBelt,_,h.degreeBelt,r),this._updateTrackPosition(u.chromaticColors,f,h.chromaticBelt,r),this._updateTrackPosition(u.chromaticNumbers,p,h.chromaticBelt,r),this._updateIntervalBracketsPosition(_,h.degreeBelt,r),this._updateCursorPosition(p,h.chromaticBelt,r),this._updatePlaybackFlash()}_initInteraction(){const{pitchBelt:t,degreeBelt:e,intervalBrackets:r,chromaticNumbersTrack:i}=this.elements;t&&this._addDragHandler(t,o=>{const l=this.state.drag.startPitchClass+(this.state.belts.orientation==="vertical"?-o:o);ne("pitchClass",l)},()=>fi("pitchClass",this.onInteractionEnd));const n=o=>{const l=this.state.belts.orientation==="vertical"?-o:o;ne("degree",this.state.drag.startDegree+l),ne("highlightPosition",this.state.drag.startHighlight+l)},s=()=>di(this.onInteractionEnd);e&&this._addDragHandler(e,n,s),r&&this._addDragHandler(r,n,s),i&&this._addDragHandler(i,o=>{const l=this.state.belts.orientation==="vertical"?-o:o,c={startPitchClass:this.state.drag.startPitchClass,startDegree:this.state.drag.startDegree,startChrom:this.state.drag.startChrom,startHighlight:this.state.drag.startHighlight};vn(c,l)},()=>_i(this.onInteractionEnd))}_addDragHandler(t,e,r){t.style.cursor="grab";let i=null,n=0,s=0;const o=u=>{i=u.pointerId,t.setPointerCapture(i),n=u.clientX,s=u.clientY;const{drag:h,rings:d}=this.state;h.active=t.id||"belt-drag",h.startPitchClass=d.pitchClass,h.startDegree=d.degree,h.startChrom=d.chromatic,h.startHighlight=d.highlightPosition,t.style.cursor="grabbing"},l=u=>{if(i!==u.pointerId)return;const{orientation:h,itemSize:d}=this.state.belts,_=h==="vertical"?u.clientY-s:u.clientX-n;let p;t.id.includes("pitch")?p="pitchBelt":t.id.includes("degree")||t.id.includes("interval")?p="degreeBelt":t.id.includes("chromatic")&&(p="chromaticBelt");const f=d[p];if(!f||f===0)return;const g=_/f*V;e(g)},c=()=>{i!==null&&(t.releasePointerCapture(i),i=null,this.state.drag.active=null,t.style.cursor="grab",r())};t.addEventListener("pointerdown",o),t.addEventListener("pointermove",l),t.addEventListener("pointerup",c),t.addEventListener("pointercancel",c)}_setupAllBelts(t,e){this.elements.pitchBelt.innerHTML="",this.elements.degreeBelt.innerHTML="",this.elements.intervalBracketsTrackContainer.innerHTML="";const r=3;this.state.belts.tracks.pitchBelt=this._createTrack(this.elements.pitchBelt,e,r),this.state.belts.tracks.degreeBelt=this._createTrack(this.elements.degreeBelt,t,r),this._populateTrack(this.elements.chromaticColorsTrack,Array(12).fill(""),r),this._populateTrack(this.elements.chromaticNumbersTrack,[...Array(12).keys()],r),this.state.belts.tracks.chromaticColors=this.elements.chromaticColorsTrack,this.state.belts.tracks.chromaticNumbers=this.elements.chromaticNumbersTrack,this._createIntervalBracketsTrack(r)}_createTrack(t,e,r){const i=document.createElement("div");return i.className="belt-track",this._populateTrack(i,e,r),t.appendChild(i),i}_populateTrack(t,e,r){t.innerHTML="";const i=e.length;for(let n=0;n<r*12+3;n++){const s=n%i,o=e[s],l=document.createElement("div");l.className="belt-cell",l.innerHTML=String(o),l.dataset.originalIndex=String(s),t.appendChild(l)}}_createIntervalBracketsTrack(t){const e=document.createElement("div");e.className="interval-brackets-track";for(let r=0;r<12*t+3;r++){const i=r%12,n=De.indexOf(i),s=document.createElement("div");if(s.className="interval-bracket-cell",n!==-1){const o=En[n];s.dataset.steps=o,s.innerHTML=`<span>+${o}</span>`}e.appendChild(s)}this.elements.intervalBracketsTrackContainer.appendChild(e)}_calculateAllItemSizes(t){return this._calcBeltItemSize("pitchBelt",this.elements.pitchBelt,t)&&this._calcBeltItemSize("degreeBelt",this.elements.degreeBelt,t)&&this._calcBeltItemSize("chromaticBelt",this.elements.chromaticBelt,t)&&this._calcBeltItemSize("intervalBracketsContainer",this.elements.intervalBracketsWrapper,t)}_calcBeltItemSize(t,e,r){const i=r==="vertical"?e.offsetHeight:e.offsetWidth;return i>0?(this.state.belts.itemSize[t]=i/12,!0):!1}_applyBeltStyles(t,e,r){var i,n,s,o;(i=this.state.belts.tracks.pitchBelt)==null||i.querySelectorAll(".belt-cell").forEach(l=>{const c=+l.dataset.originalIndex,u=Ie[c],h=fe[u];l.style.background=h?"#fff":"#000",l.style.color=h?"#000":"#fff",l.innerHTML=r[c]}),(n=this.state.belts.tracks.degreeBelt)==null||n.querySelectorAll(".belt-cell").forEach(l=>{const c=+l.dataset.originalIndex,u=ir[c]||"#f0f0f0";l.style.background=u,l.style.color=wn(u),l.innerHTML=e[c]}),(s=this.elements.chromaticColorsTrack)==null||s.querySelectorAll(".belt-cell").forEach(l=>{const c=+l.dataset.originalIndex;l.style.background=t.includes(c)?"#e0e0e0":"#4a4a4a"}),(o=this.elements.chromaticNumbersTrack)==null||o.querySelectorAll(".belt-cell").forEach(l=>{const{chromatic:c,highlightPosition:u}=this.state.rings,d=z(u-c)/V,_=+l.dataset.originalIndex,p=Math.round((_-d+12*100)%12)%12;l.style.color=t.includes(p)?"black":"lightgray"})}_calculateTranslation(t,e,r){const i=12*e/kt,n=t*i;let s,o=0;return r==="vertical"?(s=-(e*12),o=3*e,s-o+n):(s=-(e*12),s+n)}_updateTrackPosition(t,e,r,i){if(!t||!r)return;const n=this._calculateTranslation(e,r,i),s=i==="vertical"?`translateY(${n}px)`:`translateX(${n}px)`;t.style.transform=s}_updateIntervalBracketsPosition(t,e,r){const i=this.elements.intervalBracketsTrackContainer.querySelector(".interval-brackets-track");if(!i||!e)return;let n=this._calculateTranslation(t,e,r);r==="horizontal"&&(n+=.5*e);const s=r==="vertical"?`translateY(${n}px)`:`translateX(${n}px)`;i.style.transform=s}_updateCursorPosition(t,e,r){const i=this.elements.cursor;if(!i||!e)return;const n=12*e/kt,s=t*n;let o;if(r==="vertical"){const c=-12*e;o=(s%c+c)%c}else o=s;const l=r==="vertical"?`translateY(${o}px)`:`translateX(${o}px)`;i.style.transform=l}_updatePlaybackFlash(){const{rings:t,playback:e,belts:r}=this.state,i=this.elements.flashOverlay,n=r.itemSize.chromaticBelt,s=r.orientation;if(!i||!n||!e.isPlaying||e.currentNoteIndex===null){i.style.display="none";return}const o=12*n/kt;let l;if(s==="vertical"){const u=-t.chromatic,h=(e.currentNoteIndex-e.rootNoteIndexForPlayback)*V,_=(u-h)*o,p=-12*n;l=(_%p+p)%p}else l=(t.chromatic+(e.currentNoteIndex-e.rootNoteIndexForPlayback)*V)*o;const c=s==="vertical"?`translateY(${l}px)`:`translateX(${l}px)`;i.style.transform=c,i.style.display="block"}}class ba{constructor(t,e,r){this.state=e,this.callbacks=r,this.elements={resultContainer:t.querySelector("#result-container"),resultText:t.querySelector("#result-text"),flatBtn:document.getElementById("flat-btn"),sharpBtn:document.getElementById("sharp-btn"),settingsBtn:document.getElementById("settings-btn"),sidebar:document.getElementById("sidebar"),sidebarOverlay:document.getElementById("sidebar-overlay"),toggleOrientationBtn:document.getElementById("toggle-orientation-btn"),toggleDarkModeBtn:document.getElementById("toggle-dark-mode-btn"),startTutorialBtn:document.getElementById("start-tutorial-btn")},this._initListeners()}_initListeners(){this.elements.flatBtn.addEventListener("click",this.callbacks.onToggleFlat),this.elements.sharpBtn.addEventListener("click",this.callbacks.onToggleSharp),this.elements.resultContainer.addEventListener("click",t=>{t.target.closest("button")||this.callbacks.onTogglePlayback()}),this.elements.settingsBtn.addEventListener("click",t=>{t.stopPropagation(),this.callbacks.onToggleSidebar()}),this.elements.sidebarOverlay.addEventListener("click",()=>{this.state.ui.sidebarOpen&&this.callbacks.onToggleSidebar(!1)}),this.elements.toggleOrientationBtn.addEventListener("click",this.callbacks.onToggleOrientation),this.elements.toggleDarkModeBtn.addEventListener("click",this.callbacks.onToggleDarkMode),this.elements.startTutorialBtn.addEventListener("click",this.callbacks.onStartTutorial)}update(){const{display:t,playback:e,ui:r,belts:i}=this.state,{resultContainer:n,flatBtn:s,sharpBtn:o,resultText:l,sidebar:c,sidebarOverlay:u,settingsBtn:h,toggleOrientationBtn:d,toggleDarkModeBtn:_}=this.elements;s.classList.toggle("active",t.flat),o.classList.toggle("active",t.sharp),s.setAttribute("aria-pressed",String(t.flat)),o.setAttribute("aria-pressed",String(t.sharp)),n.classList.toggle("playback-active",e.isPlaying),Wn(this.state,l);const f=i.orientation==="horizontal"?"Vertical":"Horizontal";d.textContent!==f&&(d.textContent=f);const g=r.darkMode?"Light Mode":"Dark Mode";_.textContent!==g&&(_.textContent=g);const y=r.sidebarOpen;c.classList.toggle("open",y),c.setAttribute("aria-hidden",String(!y)),u.classList.toggle("visible",y),h.setAttribute("aria-expanded",String(y)),y||document.activeElement===this.elements.toggleOrientationBtn&&h.focus()}}class va{constructor(t){this.container=t,this.state=b,this.isInitialized=!1,this.cleanupFunctions=[],this.performanceMonitor=null,this.keyboardManager=null,this.screenReaderManager=null;try{this._initializeApp()}catch(e){S.handle(e,"App",()=>{console.error("Failed to initialize app")})}}_initializeApp(){if(this._addSkipLink(),this.elements={canvas:this.container.querySelector("#chromaWheel"),beltsContainer:this.container.querySelector(".belts-container")},!this.elements.canvas)throw new Error("Canvas element not found");if(!this.elements.beltsContainer)throw new Error("Belts container not found");const t={onToggleFlat:S.wrap(()=>{ft.toggleAccidental("flat"),this._announceChange(`Flat names ${this.state.display.flat?"enabled":"disabled"}`)},"UI"),onToggleSharp:S.wrap(()=>{ft.toggleAccidental("sharp"),this._announceChange(`Sharp names ${this.state.display.sharp?"enabled":"disabled"}`)},"UI"),onToggleDarkMode:S.wrap(()=>{ft.toggleDarkMode(),this._announceChange(`${this.state.ui.darkMode?"Dark":"Light"} mode enabled`)},"UI"),onTogglePlayback:S.wrap(()=>{ft.togglePlayback(),this._announceChange(this.state.playback.isPlaying?"Scale playing":"Playback stopped")},"UI"),onToggleSidebar:S.wrap(e=>{ft.toggleSidebar(e),this._announceChange(`Settings ${this.state.ui.sidebarOpen?"opened":"closed"}`)},"UI"),onToggleOrientation:S.wrap(()=>{const e=this.state.belts.orientation==="horizontal"?"vertical":"horizontal";ft.setOrientation(e),this._announceChange(`Layout changed to ${e}`)},"UI"),onStartTutorial:S.wrap(()=>{this._announceChange("Tutorial started"),ga()},"Tutorial")};try{this.wheel=new ma(this.elements.canvas,this.state,this.onInteractionEnd.bind(this))}catch(e){S.handle(e,"Wheel",()=>{console.error("Wheel component failed to initialize")})}try{this.belts=new ya(this.elements.beltsContainer,this.state,this.onInteractionEnd.bind(this))}catch(e){S.handle(e,"Belts",()=>{console.error("Belts component failed to initialize")})}try{this.uiControls=new ba(this.container,this.state,t)}catch(e){S.handle(e,"UIControls",()=>{console.error("UI Controls failed to initialize")})}this._initializeAccessibility(),this._setupResponsiveLogic();try{Nn(S.wrap(this.redraw.bind(this),"RenderLoop"))}catch(e){S.handle(e,"RenderLoop",()=>{console.error("Render loop failed to start")})}this._isDevelopment()&&this._setupPerformanceMonitoring(),this._setupAccessibilityMonitoring(),this.isInitialized=!0}_addSkipLink(){const t=document.createElement("a");t.href="#chromaWheel",t.className="skip-link",t.textContent="Skip to main content",t.style.cssText=`
      position: absolute;
      top: -40px;
      left: 6px;
      background: var(--color-surface, white);
      color: var(--color-text-primary, black);
      padding: 8px;
      z-index: 10000;
      text-decoration: none;
      border-radius: 4px;
      border: 2px solid #33c6dc;
      transition: top 0.3s;
    `,t.addEventListener("focus",()=>{t.style.top="6px"}),t.addEventListener("blur",()=>{t.style.top="-40px"}),document.body.insertBefore(t,document.body.firstChild),this.cleanupFunctions.push(()=>{t.parentNode&&t.parentNode.removeChild(t)})}_initializeAccessibility(){try{this._loadAccessibilityModules().then(()=>{console.log("Accessibility features loaded")}).catch(()=>{console.log("Using basic accessibility features"),this._setupBasicAccessibility()})}catch(t){S.handle(t,"Accessibility",()=>{console.warn("Some accessibility features may not be available"),this._setupBasicAccessibility()})}}async _loadAccessibilityModules(){try{const{KeyboardManager:t}=await Me(async()=>{const{KeyboardManager:r}=await import("./KeyboardManager-cO_1PWRd.js");return{KeyboardManager:r}},[],import.meta.url),{ScreenReaderManager:e}=await Me(async()=>{const{ScreenReaderManager:r}=await import("./ScreenReaderManager-BLQCmzWR.js");return{ScreenReaderManager:r}},[],import.meta.url);return t.init(),e.init(),this.keyboardManager=t,this.screenReaderManager=e,!0}catch{throw new Error("Accessibility modules not available")}}_setupBasicAccessibility(){this._setupBasicKeyboard(),this._setupBasicARIA(),this._setupBasicAnnouncements()}_setupBasicKeyboard(){const t=e=>{if(this._isTextInputActive())return;const r=e.ctrlKey?3:1;switch(e.key){case"ArrowLeft":e.preventDefault(),this._rotateRing("pitchClass",-r),this._announceChange("Pitch ring rotated left");break;case"ArrowRight":e.preventDefault(),this._rotateRing("pitchClass",r),this._announceChange("Pitch ring rotated right");break;case"ArrowUp":e.preventDefault(),this._rotateRing("degree",r),this._rotateRing("highlightPosition",r),this._announceChange("Degree ring rotated up");break;case"ArrowDown":e.preventDefault(),this._rotateRing("degree",-r),this._rotateRing("highlightPosition",-r),this._announceChange("Degree ring rotated down");break;case" ":case"Enter":(e.target.id==="chromaWheel"||e.target.id==="result-container")&&(e.preventDefault(),ft.togglePlayback());break;case"Escape":ft.toggleSidebar(!1);break;case"h":case"H":!e.ctrlKey&&!e.altKey&&(e.preventDefault(),this._showKeyboardHelp());break}};document.addEventListener("keydown",t),this.cleanupFunctions.push(()=>{document.removeEventListener("keydown",t)})}_rotateRing(t,e){const r=e*(Math.PI*2/12),n=(this.state.rings[t]+r)%(Math.PI*2);ft.setRingAngle(t,n)}_isTextInputActive(){const t=document.activeElement;return["INPUT","TEXTAREA","SELECT"].includes(t==null?void 0:t.tagName)||(t==null?void 0:t.contentEditable)==="true"}_setupBasicARIA(){this.container.setAttribute("role","main"),this.container.setAttribute("aria-label","Diatonic Compass Music Theory Tool"),this.elements.canvas&&(this.elements.canvas.setAttribute("tabindex","0"),this.elements.canvas.setAttribute("role","application"),this.elements.canvas.setAttribute("aria-label","Interactive Diatonic Compass - use arrow keys to explore"));const t=document.querySelector("#result-container");t&&(t.setAttribute("tabindex","0"),t.setAttribute("aria-label","Current musical key and mode - click to play"))}_setupBasicAnnouncements(){const t=document.createElement("div");t.id="basic-announcements",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","false"),t.style.cssText=`
      position: absolute;
      left: -10000px;
      width: 1px;
      height: 1px;
      overflow: hidden;
    `,document.body.appendChild(t),this.cleanupFunctions.push(()=>{t.parentNode&&t.parentNode.removeChild(t)})}_announceChange(t){const e=document.getElementById("basic-announcements");e&&(e.textContent="",setTimeout(()=>{e.textContent=t},100)),this.screenReaderManager&&this.screenReaderManager.queueAnnouncement(t)}_showKeyboardHelp(){const t=`
Keyboard Shortcuts:
- Arrow keys: Rotate rings
- Ctrl + arrows: Large steps
- Space/Enter: Play scale
- H: Show this help
- Escape: Close dialogs
    `.trim();alert(t)}_setupAccessibilityMonitoring(){const t=window.matchMedia("(prefers-reduced-motion: reduce)"),e=n=>{document.body.classList.toggle("reduced-motion",n.matches)};t.addListener(e),e(t),this.cleanupFunctions.push(()=>{t.removeListener(e)});const r=window.matchMedia("(prefers-contrast: high)"),i=n=>{document.body.classList.toggle("high-contrast",n.matches)};r.addListener(i),i(r),this.cleanupFunctions.push(()=>{r.removeListener(i)})}onInteractionEnd(){setTimeout(()=>{const t=document.querySelector("#result-text");t&&this._announceChange(`Current key: ${t.textContent}`)},100)}_setupResponsiveLogic(){const t=Jt.debounce(()=>{try{const r=window.innerWidth>window.innerHeight?"vertical":"horizontal";this.state.belts.orientation!==r?(ft.setOrientation(r),this._announceChange(`Layout changed to ${r}`)):this.redraw(performance.now())}catch(e){S.handle(e,"Resize",()=>{console.warn("Resize handling failed")})}},150);window.addEventListener("resize",t),this.cleanupFunctions.push(()=>{window.removeEventListener("resize",t),t.cancel()});try{const r=window.innerWidth>window.innerHeight?"vertical":"horizontal";ft.setOrientation(r)}catch(e){S.handle(e,"Resize")}}_setupPerformanceMonitoring(){if(this.performanceMonitor=Jt.createFPSMonitor(t=>{t<30&&console.warn(`Low FPS detected: ${t}`)},120),Jt.getMemoryInfo()){const t=setInterval(()=>{const e=Jt.getMemoryInfo();e&&e.used>100&&console.warn(`High memory usage: ${e.used}MB`)},3e4);this.cleanupFunctions.push(()=>clearInterval(t))}this.cleanupFunctions.push(()=>{this.performanceMonitor&&(this.performanceMonitor(),this.performanceMonitor=null)})}redraw(t){try{Yn(t);const e=Fn(this.elements.canvas,this.state.dimensions);if(!this.state.dimensions.size)return;const r=ui(this.state),{rings:i,playback:n}=this.state,s=De;if(this.wheel)try{this.wheel.update(i,r,n)}catch(o){S.handle(o,"Wheel",()=>{console.warn("Wheel update failed - skipping frame")})}if(this.belts)try{this.belts.update(r,s)}catch(o){S.handle(o,"Belts",()=>{console.warn("Belts update failed - skipping frame")})}if(this.uiControls)try{this.uiControls.update()}catch(o){S.handle(o,"UIControls",()=>{console.warn("UI Controls update failed - skipping frame")})}}catch(e){S.handle(e,"RenderLoop",()=>{console.error("Critical render error - app may be unstable")})}}destroy(){try{this.keyboardManager,this.screenReaderManager&&this.screenReaderManager.cleanup(),this.cleanupFunctions.forEach(t=>{try{t()}catch(e){console.warn("Cleanup function failed:",e)}}),this.cleanupFunctions=[],this.wheel&&typeof this.wheel.destroy=="function"&&this.wheel.destroy(),this.belts&&typeof this.belts.destroy=="function"&&this.belts.destroy(),this.uiControls&&typeof this.uiControls.destroy=="function"&&this.uiControls.destroy(),this.performanceMonitor&&(this.performanceMonitor(),this.performanceMonitor=null),this.isInitialized=!1}catch(t){S.handle(t,"App",()=>{console.error("App cleanup failed")})}}_isDevelopment(){return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.protocol==="file:"}getStatus(){var t,e;return{initialized:this.isInitialized,components:{wheel:!!this.wheel,belts:!!this.belts,uiControls:!!this.uiControls},accessibility:{keyboardEnabled:(t=this.keyboardManager)==null?void 0:t.isEnabled,screenReaderEnabled:(e=this.screenReaderManager)==null?void 0:e.isEnabled},dimensions:this.state.dimensions,errors:S.getErrorLog()}}}function wa(){const a=bi();a&&typeof a.darkMode=="boolean"&&(b.ui.darkMode=a.darkMode,document.body.classList.toggle("dark-mode",a.darkMode))}document.addEventListener("DOMContentLoaded",()=>{wa();const a=document.querySelector(".main-container");a&&new va(a)});export{ft as A,j as C,S as E,b as a,ui as b,Ta as g,z as n};
